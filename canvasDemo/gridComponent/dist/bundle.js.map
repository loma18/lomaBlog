{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./App/component/input.ts","webpack:///./App/component/pageSelect.ts","webpack:///./App/component/scope.ts","webpack:///./App/component/select.ts","webpack:///./App/component/toolTip.ts","webpack:///./App/grid/canvas.grid.core.ts","webpack:///./App/grid/canvas.grid.dataView.ts","webpack:///./App/grid/canvas.grid.draw.ts","webpack:///./App/grid/canvas.grid.events.ts","webpack:///./App/grid/canvas.grid.fileSaver.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./App/grid/canvas.grid.core.ts\");\n","class Input {\r\n    public target: any;\r\n    public afterInput: any;\r\n    public afterInputInit: any;\r\n    private cellInput: any;\r\n    private container: any;\r\n    private rect: any;\r\n    private state: string;\r\n\r\n    public init(formName, rect) {\r\n        this.rect = rect;\r\n        this.container = document.getElementById('eventOf' + formName);\r\n        this.cellInput = document.createElement('input');\r\n        this.cellInput.setAttribute('id', 'cellInput');\r\n        this.container.appendChild(this.cellInput);\r\n        this.initEvent();\r\n    }\r\n\r\n    public show(options) {\r\n        this.cellInput.style.display = 'block';\r\n        this.render(options);\r\n        if (this.afterInputInit) {\r\n            this.afterInputInit(this.target);\r\n        }\r\n    }\r\n\r\n    public hide() {\r\n        this.cellInput.style.display = 'none';\r\n    }\r\n\r\n    private afterEvent() {\r\n        var result = true;\r\n        this.target.value = this.cellInput.value;\r\n        this.target.rect.x = 0;\r\n        if (this.afterInput) {\r\n            result = this.afterInput(this.target);\r\n        }\r\n        if (!result) {\r\n            this.cellInput.value = this.target.row[this.target.column.ID] != undefined ? this.target.row[this.target.column.ID] : \"\";\r\n        }\r\n        this.container.focus();\r\n    }\r\n\r\n    private initEvent() {\r\n        var self = this;\r\n        this.cellInput.addEventListener('blur', function () {\r\n            if (self.state == 'keydown') {\r\n                self.state = '';\r\n                return;\r\n            }\r\n            self.afterEvent();\r\n        });\r\n        this.cellInput.addEventListener('keydown', function (e) {\r\n            if (e.keyCode == 13 || e.keyCode == 9) {\r\n                self.state = 'keydown';\r\n                self.afterEvent();\r\n                self.hide();\r\n            } else if (e.keyCode == 27) {\r\n                self.state = 'keydown';\r\n                self.container.focus();\r\n                self.hide();\r\n            } else {\r\n                e.stopPropagation();\r\n            }\r\n        });\r\n        this.cellInput.addEventListener('keyup', function (e) {\r\n            e.stopPropagation();\r\n        });\r\n        this.cellInput.addEventListener('click', function (e) {\r\n            e.stopPropagation();\r\n        });\r\n        this.cellInput.addEventListener('mousedown', function (e) {\r\n            e.stopPropagation();\r\n        });\r\n        this.cellInput.addEventListener('mousemove', function (e) {\r\n            e.stopPropagation();\r\n        });\r\n        this.cellInput.addEventListener('paste', function (e) {\r\n            e.stopPropagation();\r\n        });\r\n    }\r\n\r\n    private render(options) {\r\n        var maxLength = options.maxLength,\r\n            rect = this.rect,\r\n            scrollNum = parseInt(rect.scrollTop / rect.lineHeight + ''),\r\n            target = this.target,\r\n            top, left, value;\r\n        if (target.column.isFrozen) {\r\n            left = target.column.x;\r\n        } else {\r\n            left = target.column.x - rect.scrollLeft;\r\n            left = left < rect.frozenWidth ? rect.frozenWidth : left;\r\n        }\r\n        this.cellInput.style.height = options.outBorder ? this.target.column.height + 'px' : this.target.rect.height + 'px';\r\n        this.cellInput.style.width = options.outBorder ? this.target.column.width + 'px' : this.target.rect.width + 'px';\r\n        this.cellInput.style.textIndent = this.target.column.textIndent - 2 + 'px';\r\n        top = (target.row.showNo - scrollNum - 1) * rect.lineHeight + rect.headerHeight;\r\n        top = top > rect.headerHeight ? top : rect.headerHeight;\r\n        this.cellInput.style.top = options.outBorder ? top + 'px' : top + this.target.column.inputStyle.padding + 'px';\r\n        this.cellInput.style.left = options.outBorder ? left + 'px' : left + this.target.column.inputStyle.left + 1 + 'px';\r\n        value = options.text != undefined ? options.text : this.target.row[this.target.column.ID];\r\n        if (value == undefined) {\r\n            value = '';\r\n        }\r\n        this.cellInput.value = '' + value;\r\n        if (maxLength) {\r\n            this.cellInput.setAttribute('maxlength', maxLength);\r\n        }\r\n        this.cellInput.focus();\r\n        if (options.allSelected) {\r\n            this.cellInput.select();\r\n        }\r\n    }\r\n}\r\n\r\nexport { Input };","class PageSelect {\r\n    private date: any;\r\n    private totalNum: any;\r\n    private indexSelectValue: any;\r\n    private options: any;\r\n    private form: any;\r\n\r\n    constructor(form) {\r\n        this.form = form;\r\n    }\r\n\r\n    public init(id, options) {\r\n        this.options = options;\r\n        var outContainer = document.getElementById(id);\r\n        this.date = this.options.date || this.testData();\r\n        var container = document.createElement(\"div\"), pageGoTo, pageNum, pageSize, pageMsg;\r\n        container.setAttribute('id', 'pager-selector');\r\n        pageGoTo = this.initGoTo();\r\n        pageNum = this.initNum();\r\n        pageSize = this.initSize();\r\n        pageMsg = this.initMsg(this.date.length);\r\n        container.appendChild(pageGoTo);\r\n        container.appendChild(pageNum);\r\n        container.appendChild(pageSize);\r\n        container.appendChild(pageMsg);\r\n        outContainer.appendChild(container);\r\n        this.updatePageNum(true);\r\n        this.initEvent();\r\n    }\r\n\r\n    public updateData(date) {\r\n        this.date = date;\r\n        this.updateMsg(this.date.length);\r\n    }\r\n\r\n    public updatePageNum(firstLoad?, status?, index?, date?) {\r\n        var pageNum = document.getElementById(\"pager-number\"),\r\n            prevPage = document.createElement(\"div\"),\r\n            nextPage = document.createElement(\"div\"),\r\n            dotPage = document.createElement(\"div\"),\r\n            select: any = document.getElementsByClassName(\"pageSizeSelect\")[0],\r\n            indexValue = select.options[select.options.selectedIndex].value,\r\n            len = this.date.length,\r\n            num = Math.ceil(len / indexValue),\r\n            numPage;\r\n        this.indexSelectValue = indexValue;\r\n        pageNum.setAttribute('id', 'pager-number');\r\n        prevPage.setAttribute(\"class\", \"prevPage\");\r\n        nextPage.setAttribute(\"class\", \"nextPage\");\r\n        dotPage.setAttribute(\"class\", \"dotPage\");\r\n        prevPage.innerHTML = \"<<\";\r\n        nextPage.innerHTML = \">>\";\r\n        dotPage.innerHTML = \"...\";\r\n        this.totalNum = num;\r\n        pageNum.innerHTML = \"\";\r\n        if (index) {\r\n            index = parseInt(index);\r\n        }\r\n\r\n        if (num <= 8) {\r\n\r\n            if (firstLoad || index == 1) {\r\n                index = 1;\r\n            } else {\r\n                pageNum.appendChild(prevPage);\r\n            }\r\n            for (var i = 0; i < num; i++) {\r\n                numPage = document.createElement(\"div\");\r\n                numPage.setAttribute(\"value\", i + 1);\r\n                numPage.setAttribute(\"class\", \"numPage\");\r\n                if (i == (index - 1)) {\r\n                    numPage.classList.add(\"indexNum\");\r\n                }\r\n                numPage.innerHTML = i + 1;\r\n                pageNum.appendChild(numPage);\r\n            }\r\n            if (index != num) {\r\n                pageNum.appendChild(nextPage);\r\n            }\r\n        } else if (num > 8) {\r\n            if (firstLoad || index == 1) {\r\n                index = 1;\r\n            } else {\r\n                pageNum.appendChild(prevPage);\r\n            }\r\n            if (firstLoad || status == 1) {\r\n                for (var i1 = 0; i1 < 7; i1++) {\r\n                    numPage = document.createElement(\"div\");\r\n                    numPage.setAttribute(\"value\", i1 + 1);\r\n                    numPage.setAttribute(\"class\", \"numPage\");\r\n                    if (i1 == (index - 1)) {\r\n                        numPage.classList.add(\"indexNum\");\r\n                    }\r\n                    numPage.innerHTML = i1 + 1;\r\n                    pageNum.appendChild(numPage);\r\n                }\r\n                pageNum.appendChild(dotPage);\r\n                numPage = document.createElement(\"div\");\r\n                numPage.setAttribute(\"value\", num);\r\n                numPage.setAttribute(\"class\", \"numPage\");\r\n                numPage.innerHTML = num;\r\n                pageNum.appendChild(numPage);\r\n                pageNum.appendChild(nextPage);\r\n            } else if (status == 2) {\r\n                numPage = document.createElement(\"div\");\r\n                numPage.setAttribute(\"value\", 1);\r\n                numPage.setAttribute(\"class\", \"numPage\");\r\n                numPage.innerHTML = 1;\r\n                pageNum.appendChild(numPage);\r\n                pageNum.appendChild(dotPage);\r\n                for (var i2 = index - 2, len1 = index + 3; i2 < len1; i2++) {\r\n                    numPage = document.createElement(\"div\");\r\n                    numPage.setAttribute(\"value\", i2 + 1);\r\n                    numPage.setAttribute(\"class\", \"numPage\");\r\n                    if (i2 == (index - 1)) {\r\n                        numPage.classList.add(\"indexNum\");\r\n                    }\r\n                    numPage.innerHTML = i2 + 1;\r\n                    pageNum.appendChild(numPage);\r\n                }\r\n                dotPage = document.createElement(\"div\");\r\n                dotPage.setAttribute(\"class\", \"dotPage\");\r\n                dotPage.innerHTML = \"...\";\r\n                pageNum.appendChild(dotPage);\r\n                numPage = document.createElement(\"div\");\r\n                numPage.setAttribute(\"value\", num);\r\n                numPage.setAttribute(\"class\", \"numPage\");\r\n                numPage.innerHTML = num;\r\n                pageNum.appendChild(numPage);\r\n                pageNum.appendChild(nextPage);\r\n            } else if (status == 3) {\r\n                numPage = document.createElement(\"div\");\r\n                numPage.setAttribute(\"value\", 1);\r\n                numPage.setAttribute(\"class\", \"numPage\");\r\n                numPage.innerHTML = 1;\r\n                pageNum.appendChild(numPage);\r\n                pageNum.appendChild(dotPage);\r\n                for (var i3 = num - 6; i3 < num; i3++) {\r\n                    numPage = document.createElement(\"div\");\r\n                    numPage.setAttribute(\"value\", i3 + 1);\r\n                    numPage.setAttribute(\"class\", \"numPage\");\r\n                    if (i3 == (index - 1)) {\r\n                        numPage.classList.add(\"indexNum\");\r\n                    }\r\n                    numPage.innerHTML = i3 + 1;\r\n                    pageNum.appendChild(numPage);\r\n                }\r\n                if (index != num) {\r\n                    pageNum.appendChild(nextPage);\r\n                }\r\n            }\r\n        }\r\n        document.getElementsByClassName(\"pageinput\")[0][\"value\"] = index;\r\n        if (date) {\r\n            var arr = [];\r\n            for (var i4 = (index - 1) * parseInt(indexValue); i4 < (index * parseInt(indexValue)); i4++) {\r\n                if (!date[i4]) {\r\n                    break;\r\n                }\r\n                arr.push(date[i4]);\r\n            }\r\n            date = arr;\r\n            return date;\r\n        }\r\n\r\n    }\r\n\r\n    private initGoTo() {\r\n        var pageGoTo = document.createElement(\"div\"),\r\n            input = document.createElement(\"input\"),\r\n            goToPage = document.createElement(\"div\");\r\n        pageGoTo.setAttribute('id', 'pager-goto');\r\n        input.setAttribute(\"class\", \"pageinput\");\r\n        goToPage.setAttribute(\"class\", \"goToPage\");\r\n        goToPage.innerHTML = \"\";\r\n        pageGoTo.appendChild(input);\r\n        pageGoTo.appendChild(goToPage);\r\n        return pageGoTo;\r\n    }\r\n\r\n    private initNum() {\r\n        var pageNum = document.createElement(\"div\");\r\n        pageNum.setAttribute('id', 'pager-number');\r\n        return pageNum;\r\n    }\r\n\r\n    private initSize() {\r\n        var pageSize = document.createElement(\"div\"),\r\n            htmlStr = '' + this.initOptions().outerHTML + '';\r\n        pageSize.setAttribute('id', 'pager-size');\r\n        pageSize.innerHTML = htmlStr;\r\n        return pageSize;\r\n    }\r\n\r\n    private initOptions() {\r\n        var select = document.createElement('select'),\r\n            options, text,\r\n            pageSizeOptions = this.options.selectSizeOptions || [10, 15, 20, 30, 100];\r\n        select.setAttribute(\"class\", \"pageSizeSelect\");\r\n        for (var i = 0, len = pageSizeOptions.length; i < len; i++) {\r\n            options = document.createElement('option');\r\n            options.setAttribute('class', 'pageSizeOptions');\r\n            options.setAttribute('value', pageSizeOptions[i]);\r\n            text = document.createTextNode(pageSizeOptions[i] + \"\");\r\n            options.appendChild(text);\r\n            select.appendChild(options);\r\n        }\r\n        return select;\r\n    }\r\n\r\n    private updateMsg(total) {\r\n        var htmlStr = '' + total + '';\r\n        document.getElementById(\"pager-msg\").innerHTML = htmlStr;\r\n    }\r\n\r\n    private initMsg(total) {\r\n        var pageMsg = document.createElement(\"div\"),\r\n            htmlStr = '' + total + '';\r\n        pageMsg.setAttribute('id', 'pager-msg');\r\n        pageMsg.innerHTML = htmlStr;\r\n        return pageMsg;\r\n    }\r\n\r\n    private testData() {\r\n        var arr = [];\r\n        for (var i = 0; i < 1000; i++) {\r\n            arr.push(i);\r\n        }\r\n        return arr;\r\n    }private initEvent() {\r\n        var self = this;\r\n        var container = document.getElementById(\"pager-selector\");\r\n        container.addEventListener(\"click\", function (e) {\r\n            e.stopPropagation();\r\n            var target: any = e.target,\r\n                targetValue, oldValue = parseInt(document.getElementsByClassName(\"indexNum\")[0].getAttribute(\"value\"));\r\n            if (!target) {\r\n                return;\r\n            }\r\n            if (target.className == \"numPage\") {\r\n                targetValue = parseInt(target.getAttribute(\"value\"));\r\n            } else if (target.className == \"prevPage\") {\r\n                targetValue = oldValue;\r\n                targetValue -= 1;\r\n            } else if (target.className == \"nextPage\") {\r\n                targetValue = oldValue;\r\n                targetValue += 1;\r\n            } else if (target.className == \"pageSizeSelect\") {\r\n                if (self.indexSelectValue == target.options[target.options.selectedIndex].value) {\r\n                    return;\r\n                }\r\n                self.form.form.dataView.rows = self.updatePageNum(true, null, null, self.date);\r\n                self.form.form.update();\r\n            } else if (target.className == \"goToPage\") {\r\n                targetValue = parseInt(document.getElementsByClassName(\"pageinput\")[0][\"value\"]);\r\n            }\r\n            if (!targetValue || targetValue == oldValue) {\r\n                return;\r\n            }\r\n            self.clearCheckFlag();\r\n            if (targetValue < 5) {\r\n                self.form.form.dataView.rows = self.updatePageNum(false, 1, targetValue, self.date);\r\n            } else if (4 < targetValue && targetValue < self.totalNum - 4) {\r\n                self.form.form.dataView.rows = self.updatePageNum(false, 2, targetValue, self.date);\r\n            } else {\r\n                self.form.form.dataView.rows = self.updatePageNum(false, 3, targetValue, self.date);\r\n            }\r\n            self.form.form.update();\r\n        });\r\n    }\r\n\r\n    private clearCheckFlag() {\r\n        var list = document.getElementsByClassName(\"numPage\");\r\n        for (var i = 0, len = list.length; i < len; i++) {\r\n            list[i].classList.remove(\"indexNum\");\r\n        }\r\n    }\r\n}\r\nexport {PageSelect };","class Scope {\r\n    private rect: any;\r\n    private container: any;\r\n    private scopeDiv: any;\r\n    private scopeLine: any;\r\n    private state: string = 'solid';\r\n\r\n    constructor(containerId, formName, rect) {\r\n        this.container = document.getElementById(containerId);\r\n        this.rect = rect;\r\n        this.init(formName);\r\n    }\r\n\r\n    public changeState(type) {\r\n        if (type == 'none') {\r\n            this.scopeDiv.style[\"border-style\"] = 'solid';\r\n            this.state = 'solid';\r\n            return;\r\n        }\r\n        this.scopeDiv.style[\"border-style\"] = 'dashed';\r\n        this.state = 'dashed';\r\n    }\r\n\r\n    public showScope(firstTarget, lastTarget?, treeWidth?) {\r\n        lastTarget = lastTarget ? lastTarget : firstTarget;\r\n        var rect = this.rect,\r\n            height = this.container.clientHeight,\r\n            width = this.container.clientWidth,\r\n            scrollNum = parseInt(rect.scrollTop / rect.lineHeight + ''),\r\n            top, bottom, left, right, leftTarget = firstTarget, rightTarget = lastTarget, topTarget = firstTarget, bottomTarget = lastTarget;\r\n        if (firstTarget.column.x - lastTarget.column.x > 0) {\r\n            leftTarget = lastTarget;\r\n            rightTarget = firstTarget;\r\n        }\r\n        if (firstTarget.row.showNo > lastTarget.row.showNo) {\r\n            topTarget = lastTarget;\r\n            bottomTarget = firstTarget;\r\n        }\r\n        top = (topTarget.row.showNo - scrollNum - 1) * rect.lineHeight + rect.headerHeight;\r\n        top = top > rect.headerHeight ? top : rect.headerHeight;\r\n        bottom = height - (bottomTarget.row.showNo - scrollNum) * rect.lineHeight - rect.headerHeight;\r\n        bottom = bottom < 0 ? 0 : bottom;\r\n        if (leftTarget.column.isFrozen) {\r\n            left = leftTarget.column.x;\r\n        } else {\r\n            left = leftTarget.column.x - rect.scrollLeft;\r\n            left = left < rect.frozenWidth ? rect.frozenWidth : left;\r\n        }\r\n        if (rightTarget.column.isFrozen) {\r\n            right = width - (rightTarget.column.x + rightTarget.column.width);\r\n        } else {\r\n            right = width - (rightTarget.column.x + rightTarget.column.width - rect.scrollLeft);\r\n        }\r\n        right = right < 0 ? 0 : right;\r\n        if (top + bottom >= height) {\r\n            this.scopeDiv.style.display = 'none';\r\n            this.scopeLine.style.display = 'none';\r\n            return;\r\n        } else {\r\n            this.scopeDiv.style.display = 'block';\r\n            this.scopeLine.style.display = 'block';\r\n        }\r\n        if (left + right >= width) {\r\n            this.scopeDiv.style.display = 'none';\r\n        }\r\n        this.scopeDiv.style.top = top + 'px';\r\n        this.scopeLine.style.top = top + 'px';\r\n        var scopeWidth = width - (left + right);\r\n        this.scopeDiv.style.width = scopeWidth + 'px';\r\n        this.scopeDiv.style.bottom = bottom + 'px';\r\n        this.scopeLine.style.bottom = bottom + 'px';\r\n        this.scopeDiv.style.left = left + 'px';\r\n        this.scopeLine.style.left = treeWidth + 'px';\r\n        this.scopeDiv.style.border = '1px ' + this.state + ' black';\r\n        this.scopeLine.style[\"border-style\"] = '';\r\n        this.scopeLine.style.border = \"1px solid black\";\r\n        this.scopeLine.style.position = \"absolute\";\r\n        this.scopeDiv.style.position = \"absolute\";\r\n    }\r\n\r\n    public destory(name?) {\r\n        var scopeDiv = document.getElementsByClassName('scopeDiv'),\r\n            scopeLine = document.getElementsByClassName('scopeLine');\r\n        for (var i = 0; i < scopeDiv.length; i++) {\r\n            if (scopeDiv[i].getAttribute('id') == name + 'scopeDiv') {\r\n                continue;\r\n            }\r\n            if (scopeDiv && scopeDiv[i].parentNode) {\r\n                scopeDiv[i]['style'].display = 'none';\r\n            }\r\n            if (scopeLine && scopeLine[i]) {\r\n                scopeLine[i]['style'].display = 'none';\r\n            }\r\n        }\r\n    }\r\n\r\n    private init(formName) {\r\n        var copyArea = document.createElement('textarea'),\r\n            scopeDiv = document.createElement('div'),\r\n            scopeLine = document.createElement('div');\r\n        copyArea.className = 'copyArea';\r\n        scopeDiv.className = 'scopeDiv';\r\n        scopeLine.className = 'scopeLine';\r\n        copyArea.setAttribute('id', 'copyAreaOf' + formName);\r\n        scopeDiv.setAttribute('id', 'scopeDiv' + formName);\r\n        scopeLine.setAttribute('id', 'scopeLine' + formName);\r\n        scopeDiv.style.display = 'none';\r\n        scopeLine.style.display = 'none';\r\n        scopeDiv.onselectstart = function (e) {\r\n            e.preventDefault();\r\n            return false;\r\n        };\r\n        scopeLine.onselectstart = function (e) {\r\n            e.preventDefault();\r\n            return false;\r\n        };\r\n        this.scopeDiv = scopeDiv;\r\n        this.scopeLine = scopeLine;\r\n        this.container.appendChild(copyArea);\r\n        this.container.appendChild(scopeDiv);\r\n        this.container.appendChild(scopeLine);\r\n    }\r\n}\r\nexport {Scope };","import {Input } from './input';\r\n\r\nclass Select {\r\n    public target: any;\r\n    public initSelectData: any;\r\n    public afterSelected: any;\r\n    private options: any;\r\n    private cellSelect: any;\r\n    private Input: Input;\r\n    private container: any;\r\n    private formName: string;\r\n\r\n    constructor(containerId, formName) {\r\n        this.container = document.getElementById(containerId);\r\n        this.formName = formName;\r\n        this.init();\r\n    }\r\n\r\n    public show(target) {\r\n        this.target = target;\r\n        this.options = this.initSelectData ? this.initSelectData(target) : undefined;\r\n        if (!this.options || this.options.result == false || !this.options.data) {\r\n            return;\r\n        }\r\n        this.render();\r\n    }\r\n\r\n    public hide() {\r\n        this.cellSelect.innerText = '';\r\n        this.cellSelect.style.display = 'none';\r\n    }\r\n\r\n    private init() {\r\n        var ul = document.createElement('ul');\r\n        ul.setAttribute('id', 'cellSelectOf' + this.formName);\r\n        ul.className = 'cellSelect';\r\n        ul.style.display = 'none';\r\n        this.cellSelect = ul;\r\n        this.container.appendChild(this.cellSelect);\r\n        this.initEvent();\r\n        // this.render();\r\n    }\r\n\r\n    private initEvent() {\r\n        var self = this;\r\n        this.cellSelect.addEventListener('click', function (e) {\r\n            e.stopPropagation();\r\n            var result = true;\r\n            if (e.target.nodeName.toLowerCase() == \"li\") {\r\n                self.target.index = e.target.getAttribute(\"key\");\r\n                self.afterSelected(self.target);\r\n                self.hide();\r\n            }\r\n            self.container.focus();\r\n        });\r\n        // this.Input.cellInput.addEventListener('input', function (e) {\r\n        //     // _self.Select.matchData(this.value, target);\r\n        // });\r\n    }\r\n\r\n    private selectByKeyboard() {\r\n        // console.log('test');\r\n    }\r\n\r\n    private matchData(str) {\r\n        var selectOption = this.cellSelect.children;\r\n        for (var i = 0, len = selectOption.length; i < len; i++) {\r\n            if (selectOption[i].innerText.indexOf(str) < 0) {\r\n                selectOption[i].style.display = 'none';\r\n            }\r\n        }\r\n    }\r\n\r\n    private render() {\r\n        var data = this.options.data, li, id = this.options.id, title = this.options.title;\r\n        for (var i = 0, len = data.length; i < len; i++) {\r\n            li = document.createElement('li');\r\n            li.className = 'cellOption';\r\n            li.innerText = data[i][title];\r\n            li.setAttribute('title', data[i][title]);\r\n            li.setAttribute('key', data[i][id]);\r\n            this.cellSelect.appendChild(li);\r\n        }\r\n        this.cellSelect.style.display = 'block';\r\n        this.cellSelect.style.width = this.target.rect.width + \"px\";\r\n        this.cellSelect.style.left = this.target.rect.left + 1 + 'px';\r\n        this.cellSelect.style.top = this.target.rect.top + 1 + 'px';\r\n    }\r\n}\r\n\r\nexport {Select };","/**\r\n * \r\n */\r\n\r\nclass ToolTip {\r\n    public target: any;\r\n    public beforeToolTipShow: any;\r\n    protected container: any;\r\n    protected toolTip: any;\r\n    protected strTip: any;\r\n    private batchBox: any;\r\n\r\n    public init(id) {\r\n        this.container = document.querySelector('#' + id);\r\n        this.batchBox = this.container.parentElement;\r\n        this.batchBox.style.position = \"relative\";\r\n        this.strTip = this.beforeToolTipShow ? this.beforeToolTipShow(this.target) : '';\r\n        if (this.strTip) {\r\n            this.render();\r\n        }\r\n    }\r\n\r\n    public destory() {\r\n        var toolTip = document.getElementById('toolTip');\r\n        if (toolTip && toolTip.parentNode) {\r\n            toolTip.parentNode.removeChild(toolTip);\r\n\r\n        }\r\n    }\r\n\r\n    private render() {\r\n        var toolTip = document.createElement('div'),\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            clientWidth,\r\n            clientHeight;\r\n        toolTip.setAttribute('id', 'toolTip');\r\n        toolTip.style.position = \"absolute\";\r\n        toolTip.style.zIndex = '1000';\r\n        x = this.target.rect.clickX ? this.target.rect.clickX : this.target.rect.x;\r\n        y = this.target.rect.clickY ? this.target.rect.clickY : this.target.rect.y;\r\n        width = this.batchBox.clientWidth;\r\n        height = this.batchBox.clientHeight;\r\n        clientWidth = document.documentElement.clientWidth;\r\n        clientHeight = document.documentElement.clientHeight;\r\n        toolTip.innerText = this.strTip;\r\n        this.batchBox.appendChild(toolTip);\r\n        this.toolTip = document.querySelector('#toolTip');\r\n        if (!this.target.toolTipsNoUp && (this.target.clientY + this.toolTip.getBoundingClientRect().height + 18 > clientHeight || y + this.toolTip.getBoundingClientRect().height + 18 > height)) {\r\n            if (y - this.toolTip.getBoundingClientRect().height < 0) {\r\n                this.toolTip.style.bottom = 10 + \"px\";\r\n            } else {\r\n                this.toolTip.style.bottom = height - y + 10 + \"px\";\r\n            }\r\n        } else {\r\n            this.toolTip.style.top = y + 16 + \"px\";\r\n        }\r\n        if (this.target.clientX + this.toolTip.getBoundingClientRect().width > clientWidth || x + this.toolTip.getBoundingClientRect().width > width) {\r\n            if (x - this.toolTip.getBoundingClientRect().width < 0) {\r\n                this.toolTip.style.right = 0;\r\n            } else {\r\n                this.toolTip.style.right = width - x + \"px\";\r\n            }\r\n        } else {\r\n            this.toolTip.style.left = x + \"px\";\r\n        }\r\n        //tipstips\r\n        if (x < 50 || this.target.clientX < 50) {\r\n            this.toolTip.style.right = \"\";\r\n            this.toolTip.style.left = x + \"px\";\r\n        }\r\n    }\r\n}\r\n\r\nexport {ToolTip };","import { CanvasDraw } from './canvas.grid.draw';\r\nimport { CanvasEvent } from './canvas.grid.events';\r\nimport { DataView } from \"./canvas.grid.dataView\";\r\nimport {FileSaver } from \"./canvas.grid.fileSaver\";\r\n\r\nclass CanvasGrid {\r\n\r\n    protected context: any;\r\n    protected dataView: DataView;\r\n    protected events: CanvasEvent;\r\n    protected options: any;\r\n    protected render: CanvasDraw;\r\n    protected fileSaver: FileSaver;\r\n\r\n    constructor(options, columns) {\r\n        this.initOptions(options);\r\n        this.render = new CanvasDraw(this.options);\r\n        this.dataView = new DataView(this.options, columns);\r\n        this.events = new CanvasEvent(this);\r\n        this.fileSaver = new FileSaver(this.options);\r\n        this.fileSaver.dataView = this.dataView;\r\n        this.dataView.updateFrame = this.updateFrame.bind(this);\r\n        this.resize = this.resize.bind(this);\r\n    }\r\n\r\n    public init(): any {\r\n        this.initCanvas();\r\n        this.setCanvasSize();\r\n        this.dataView.init();\r\n        this.events.init();\r\n        window.onresize = this.resize;\r\n        this.render.data = this.dataView;\r\n        this.render.render();\r\n    }\r\n\r\n    public update() {\r\n        if (!this.dataView.rows || this.dataView.rows.length <= 0) {\r\n            this.events.destoryScope();\r\n        }\r\n        this.dataView.update();\r\n        this.render.render();\r\n    }\r\n\r\n    public updateColums() {\r\n        this.dataView.init();\r\n        this.setCanvasSize();\r\n        this.setScrollBar();\r\n        this.update();\r\n    }\r\n\r\n    public exportToExcel(fileName, sheetName) {\r\n        // this.fileSaver.exportToExcel(fileName, sheetName);\r\n    }\r\n\r\n    public jumpToRow(key, value) {\r\n        var row = this.dataView.jumpToRow(key, value);\r\n        this.events.scrollIntoView(true);\r\n        this.events.updateCurtarget(row, true);\r\n        this.events.onfocus();\r\n    }\r\n\r\n    public resize() {\r\n        var width = document.getElementById('eventOf' + this.options.name).getBoundingClientRect().width;\r\n        if (width > 0) {\r\n            this.updateFrame();\r\n            this.update();\r\n            this.onfocus();\r\n        }\r\n    }\r\n\r\n    public toggleTree() {\r\n        this.dataView.toggleTree();\r\n        this.resize();\r\n    }\r\n\r\n    public onfocus() {\r\n        this.events.onfocus();\r\n    }\r\n    public onblur() {\r\n        this.events.onblur();\r\n    }\r\n\r\n    private initOptions(options) {\r\n        this.options = {\r\n            name: 'Grid',\r\n            container: '',\r\n            headerHeight: 36,\r\n            headerBackground: '#F4F4FB',\r\n            headerColor: '#000',\r\n            headerFont: '14px Arial, Helvetica, sans-serif',\r\n            headerAlign: 'start',\r\n            headerLineColor: '#f0f0f0',\r\n            lineHeight: 36,\r\n            lineColor: '#f0f0f0',\r\n            lineWidth: 1,\r\n            bodyBackground: '#FFF',\r\n            bodyColor: '#707070',\r\n            borderLine: 'all',\r\n            textIndent: 16,\r\n            readOnly: false,\r\n            iconList: {},\r\n            iconSize: 16,\r\n            hasCellSelect: false,\r\n            hasHover: false,\r\n            startLevel: 1,\r\n            treeColor: '#ccc',\r\n            treeLineStyle: [4, 2],\r\n            expandToLevel: false,\r\n        };\r\n        for (const key in options) {\r\n            this.options[key] = options[key];\r\n        }\r\n    }\r\n\r\n    private initCanvas() {\r\n        var container = document.getElementById(this.options.container),\r\n            formName = this.options.name,\r\n            htmlStr = '<div id=\"eventOf' + formName + '\" tabindex=0  style=\"width:calc(100% - 8px);height:calc(100% - 8px);position:relative;z-index:1;overflow:hidden;outline:none;\"><canvas id=\"canvasOf' + formName + '\" style=\"width:100%;height:100%;outline:none;\">Canvas!</canvas></div>'\r\n                + '<div id = \"scrollX' + formName + '\"style=\"display:none;position:absolute;z-index:1;overflow:auto;height:8px;width:100px;border-radius:4px;bottom:0px;left:0px;background:rgba(153,153,153,0.8);\"></div>'\r\n                + '<div id = \"scrollY' + formName + '\"style=\"display:none;position:absolute;z-index:1;overflow:auto;height:100px;width:8px;border-radius:4px;right:0px;top:0px;background:rgba(153,153,153,0.8);\"></div>';\r\n        container.innerHTML = htmlStr;\r\n        container.style.position = 'relative';\r\n        var canvas: any = document.getElementById('canvasOf' + formName);\r\n        this.context = canvas.getContext('2d');\r\n        this.render.context = this.context;\r\n    }\r\n\r\n    private setScrollBar() {\r\n        var options = this.options,\r\n            rect = this.dataView.rect,\r\n            scrollX = document.getElementById('scrollX' + options.name),\r\n            scrollY = document.getElementById('scrollY' + options.name);\r\n        if (rect.totalHeight > rect.viewHeight - rect.headerHeight) {\r\n            scrollY.style.display = 'block';\r\n            scrollY.style.height = (rect.viewHeight - rect.headerHeight) * ((rect.viewHeight - rect.headerHeight) / rect.totalHeight) + 'px';\r\n        } else {\r\n            scrollY.style.display = 'none';\r\n            rect.scrollTop = 0;\r\n        }\r\n        if (rect.totalWidth > rect.viewWidth) {\r\n            scrollX.style.display = 'block';\r\n            scrollX.style.width = (rect.viewWidth) * rect.viewWidth / rect.totalWidth + 'px';\r\n        } else {\r\n            scrollX.style.display = 'none';\r\n            rect.scrollLeft = 0;\r\n        }\r\n        this.events.updateScroll();\r\n    }\r\n\r\n    private setCanvasSize() {\r\n        var ratio = window.devicePixelRatio ? devicePixelRatio : 1,\r\n            options = this.dataView.rect,\r\n            container = document.getElementById('eventOf' + this.options.name),\r\n            canvas = document.getElementById('canvasOf' + this.options.name),\r\n            width, height;\r\n        if (!container || !canvas) {\r\n            return;\r\n        }\r\n        width = container.getBoundingClientRect().width,\r\n            height = container.getBoundingClientRect().height;\r\n        options.viewWidth = width;\r\n        options.viewHeight = height;\r\n        canvas.setAttribute('width', width * ratio + '');\r\n        canvas.setAttribute('height', height * ratio + '');\r\n        canvas.style.width = Math.floor(width) + 'px';\r\n        canvas.style.height = Math.floor(height) + 'px';\r\n        this.context.scale(ratio, ratio);\r\n    }\r\n\r\n    private updateFrame() {\r\n        this.setCanvasSize();\r\n        this.setScrollBar();\r\n    }\r\n}\r\nwindow['CanvasGrid'] = CanvasGrid;\r\nexport { CanvasGrid };","class DataView {\r\n    public rows: Array<any>;\r\n    public allRows: Array<any>;\r\n    public rect: any;\r\n    public rowData: Array<any>;\r\n    public updateFrame: any;\r\n    public treeState: any;\r\n    public beforeFilterRow: any;\r\n    public beforeInitRow: any;\r\n    public rowsMap: any;\r\n    protected columns: Array<any>;\r\n    protected options: any;\r\n    protected renderColumns: Array<any>;\r\n    protected activeColumns: Array<any>;\r\n    protected leafActiveCols: Array<any>;\r\n    protected renderLeafCols: Array<any>;\r\n    protected frozenColumns: Array<any>;\r\n    protected renderFrozenCols: Array<any>;\r\n    protected leafFrozenCols: Array<any>;\r\n    protected renderRows: Array<any> = [];\r\n    protected colsLevel: number = 1;\r\n    protected rowLevel: number = 1;\r\n    protected hoverTarget: any;\r\n    protected hoverIcon: any;\r\n    protected selectedRow: any;\r\n    protected selectedRowByRender: any;\r\n\r\n    constructor(options, columns) {\r\n        this.options = options;\r\n        this.columns = columns;\r\n        this.initRect();\r\n    }\r\n\r\n    public init() {\r\n        this.initColums();\r\n    }\r\n\r\n    public initRow() {\r\n        this.initRows();\r\n    }\r\n\r\n    public doFilter(rowsMap) {\r\n        this.rowsMap = rowsMap;\r\n        this.filterRows();\r\n    }\r\n\r\n    public update() {\r\n        var minX = this.rect.scrollLeft + this.rect.frozenWidth,\r\n            maxX = this.rect.scrollLeft + this.rect.viewWidth,\r\n            minY = this.rect.scrollTop,\r\n            maxY = this.rect.scrollTop + this.rect.viewHeight - this.rect.headerHeight;\r\n        this.updateRenderRows(minY, maxY);\r\n        this.updateRenderCols(minX, maxX);\r\n    }\r\n\r\n    public toggleTree() {\r\n        if (this.treeState != 'fold') {\r\n            this.treeState = 'fold';\r\n            this.updateWidthByID('tree', 0);\r\n        } else {\r\n            this.treeState = 'expand';\r\n            this.updateWidthByID('tree', 'expand');\r\n        }\r\n    }\r\n\r\n    public jumpToRow(key, value) {\r\n        var rows = this.rows;\r\n        for (var i = 0, len = rows.length; i < len; i++) {\r\n            if (rows[i][key] == value) {\r\n                this.selectedRowByRender = rows[i].showNo;\r\n                this.selectedRow = rows[i].index;\r\n                return rows[i];\r\n            }\r\n        }\r\n    }\r\n\r\n    private initRect() {\r\n        this.rect = {\r\n            viewWidth: 0,\r\n            viewHeight: 0,\r\n            totalWidth: 0,\r\n            totalHeight: 0,\r\n            headerHeight: 0,\r\n            scrollWidth: 0,\r\n            scrollLeft: 0,\r\n            scrollTop: 0,\r\n            widthSetByNum: 0,\r\n            frozenWidth: 0,\r\n            lineHeight: this.options.lineHeight,\r\n        };\r\n    }\r\n\r\n    private initColums() {\r\n        this.frozenColumns = [];\r\n        this.activeColumns = [];\r\n        this.renderLeafCols = [];\r\n        this.leafActiveCols = [];\r\n        this.leafFrozenCols = [];\r\n        this.renderFrozenCols = [];\r\n        this.rect.widthSetByNum = 0;\r\n        this.rect.totalWidth = 0;\r\n        this.rect.frozenWidth = 0;\r\n        this.calcLevel(this.columns, 1);\r\n        this.calcPos(this.columns, 0, 0);\r\n        this.update();\r\n    }\r\n\r\n    private calcLevel(columns, level) {\r\n        if (level > this.colsLevel) {\r\n            this.colsLevel = level;\r\n        }\r\n        for (var i = 0, len = columns.length; i < len; i++) {\r\n            columns[i].level = level;\r\n            if (columns[i].children) {\r\n                this.calcLevel(columns[i].children, level + 1);\r\n            } else if (columns[i].percentageWidth != true) {\r\n                this.rect.widthSetByNum += columns[i].width;\r\n            }\r\n        }\r\n        this.rect.headerHeight = this.colsLevel * this.options.headerHeight;\r\n    }\r\n\r\n    private calcPos(columns, coordinateX, coordinateY, columnID?, width?) {\r\n        var curWidth = 0, percent = 0,\r\n            adaptiveWidth = this.rect.viewWidth - this.rect.widthSetByNum;\r\n        for (var i = 0, len = columns.length; i < len; i++) {\r\n            if (!columns[i].isColumnHide) {\r\n                columns[i].x = coordinateX;\r\n                columns[i].y = coordinateY;\r\n            }\r\n            if (columns[i].children) {\r\n                columns[i].height = this.options.headerHeight;\r\n                columns[i].width = this.calcPos(columns[i].children, coordinateX, columns[i].height + coordinateY, columnID, width);\r\n            } else {\r\n                columns[i].height = (this.colsLevel - columns[i].level + 1) * this.options.headerHeight;\r\n                columns[i].width = columns[i].width ? columns[i].width : 120;\r\n                if (!columnID) {\r\n                    if (columns[i].percentageWidth == true && typeof (columns[i].width) == \"string\") {\r\n                        percent = columns[i].width.replace('%', '') / 100;\r\n                        columns[i].width = adaptiveWidth > 0 ? adaptiveWidth * percent : 120;\r\n                    }\r\n                    columns[i] = this.checkMaxMinWidth(columns[i]);\r\n                } else if (width != undefined && columns[i].ID == columnID) {\r\n                    if (columnID == 'tree' && width == 'expand') {\r\n                        columns[i].width = columns[i].textIndent * 2 + this.rowLevel * 20;\r\n                    } else {\r\n                        columns[i].width = width;\r\n                    }\r\n                }\r\n                if (columns[i].isFrozen == true) {\r\n                    this.leafFrozenCols.push(columns[i]);\r\n                    this.leafFrozenCols[this.leafFrozenCols.length - 1]['index'] = this.leafFrozenCols.length - 1;\r\n                } else {\r\n                    this.leafActiveCols.push(columns[i]);\r\n                    this.leafActiveCols[this.leafActiveCols.length - 1]['index'] = this.leafActiveCols.length - 1;\r\n                }\r\n                if (!columns[i].isColumnHide) {\r\n                    this.rect.totalWidth += columns[i].width;\r\n                }\r\n                curWidth += columns[i].width;\r\n            }\r\n            if (columns[i].isFrozen == true) {\r\n                if (!columns[i].isColumnHide) {\r\n                    this.renderFrozenCols.push(columns[i]);\r\n                    this.rect.frozenWidth += columns[i].width;\r\n                }\r\n                this.frozenColumns.push(columns[i]);\r\n            } else {\r\n                this.activeColumns.push(columns[i]);\r\n            }\r\n            if (!columns[i].isColumnHide) {\r\n                coordinateX += columns[i].width;\r\n            }\r\n        }\r\n        return curWidth;\r\n    }\r\n\r\n    private checkMaxMinWidth(column) {\r\n        var minWidth = column.minWidth ? column.minWidth : 30,\r\n            maxWidth = column.maxWidth ? column.maxWidth : this.rect.viewWidth * 0.9;\r\n        if (column.width < minWidth) {\r\n            column.width = minWidth;\r\n        }\r\n        if (maxWidth > 0 && column.width > maxWidth) {\r\n            column.width = maxWidth;\r\n        }\r\n        return column;\r\n    }\r\n\r\n    private updateRenderCols(minX, maxX) {\r\n        var data = this.activeColumns;\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.renderColumns = [];\r\n        this.renderLeafCols = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            if (data[i].isColumnHide) {\r\n                continue;\r\n            }\r\n            if (data[i].x + data[i].width > minX && data[i].x < maxX) {\r\n                this.renderColumns.push(data[i]);\r\n                if (!data[i].children) {\r\n                    this.renderLeafCols.push(data[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private updateRenderRows(minY, maxY) {\r\n        var data = this.rows;\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.renderRows = [];\r\n        minY = minY / this.options.lineHeight;\r\n        for (var i = parseInt(minY); i < Math.floor(maxY / this.options.lineHeight) + 1 && i < data.length; i++) {\r\n            data[i]['NO'] = i + 1;\r\n            this.renderRows.push(data[i]);\r\n        }\r\n    }\r\n\r\n    private expandGridTree(target) {\r\n        var programID = target.row.id,\r\n            data = this.rowData;\r\n        for (var i = 0, len = data.length; i < len; i++) {\r\n            if (data[i].id != programID) {\r\n                continue;\r\n            }\r\n            if (data[i].isFold == true) {\r\n                data[i].isFold = false;\r\n                break;\r\n            }\r\n            data[i].isFold = true;\r\n            break;\r\n        }\r\n        this.filterRows();\r\n    }\r\n\r\n    private expandToLevel(level) {\r\n        var data = this.rowData;\r\n        if (this.options.startLevel == 0) {\r\n            level -= 1;\r\n        }\r\n        for (var i = 0, len = data.length; i < len; i++) {\r\n            if (!data[i].isMiddleLevel) {\r\n                continue;\r\n            }\r\n            if (data[i].level == level) {\r\n                data[i].isFold = true;\r\n            } else if (data[i].level < level) {\r\n                data[i].isFold = false;\r\n            }\r\n        }\r\n        this.filterRows();\r\n    }\r\n\r\n    private filterRows() {\r\n        var rows = this.rowData, currentLevel, result;\r\n        this.rows = [];\r\n        this.allRows = [];\r\n        for (var i = 0, len = rows.length; i < len; i++) {\r\n            if (this.rowsMap && this.rowsMap(rows[i].id, rows[i]) == false) {\r\n                continue;\r\n            }\r\n            this.allRows.push(rows[i]);\r\n            this.allRows[this.allRows.length - 1]['index'] = i + 1;\r\n            if (currentLevel != undefined && rows[i].level > currentLevel) {\r\n                continue;\r\n            }\r\n            this.rows.push(rows[i]);\r\n            this.rows[this.rows.length - 1]['index'] = i + 1;\r\n            this.rows[this.rows.length - 1]['showNo'] = this.rows.length;\r\n            if (rows[i].isFold == true) {\r\n                currentLevel = rows[i].level;\r\n                continue;\r\n            } else {\r\n                currentLevel = undefined;\r\n            }\r\n        }\r\n        this.rect.totalHeight = this.rows.length * this.options.lineHeight < this.rect.viewHeight - this.rect.headerHeight ? this.rows.length * this.options.lineHeight : (this.rows.length + 1) * this.options.lineHeight;\r\n        this.updateFrame();\r\n    }\r\n\r\n    private initRows() {\r\n        var rows = this.rowData, currentLevel, hideLevel, isHide, result, chidlIsHide;\r\n        this.rows = [];\r\n        this.allRows = [];\r\n        for (var i = 0, len = rows.length; i < len; i++) {\r\n            if (hideLevel != undefined && hideLevel < rows[i].level) {\r\n                continue;\r\n            }\r\n            hideLevel = undefined;\r\n            isHide = this.beforeInitRow ? this.beforeInitRow(rows[i]) : undefined;\r\n            if (rows[i].isMiddleLevel) {\r\n                if (isHide == true) {\r\n                    hideLevel = rows[i].level;\r\n                    continue;\r\n                }\r\n                result = false;\r\n                for (var j = i + 1, length = rows.length; j < length; j++) {\r\n                    if (rows[j].level <= rows[i].level) {\r\n                        break;\r\n                    }\r\n                    chidlIsHide = this.beforeInitRow ? this.beforeInitRow(rows[j]) : undefined;\r\n                    if (chidlIsHide == true) {\r\n                        continue;\r\n                    }\r\n                    if (!rows[j].isMiddleLevel) {\r\n                        result = true;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                if (isHide == true) {\r\n                    continue;\r\n                }\r\n                result = true;\r\n            }\r\n            if (this.options.startLevel == 0 && rows[i].level + 1 > this.rowLevel) {\r\n                this.rowLevel = rows[i].level + 1;\r\n            } else if (this.options.startLevel == 0 && rows[i].level > this.rowLevel) {\r\n                this.rowLevel = rows[i].level;\r\n            }\r\n            if (result != false) {\r\n                this.allRows.push(rows[i]);\r\n                this.allRows[this.allRows.length - 1]['index'] = i + 1;\r\n                this.allRows[this.allRows.length - 1]['showNo'] = this.allRows.length;\r\n            }\r\n            if (currentLevel != undefined && rows[i].level > currentLevel) {\r\n                continue;\r\n            }\r\n            if (result == false) {\r\n                i = j - 1;\r\n                continue;\r\n            }\r\n            this.rows.push(rows[i]);\r\n            this.rows[this.rows.length - 1]['index'] = i + 1;\r\n            this.rows[this.rows.length - 1]['showNo'] = this.rows.length;\r\n            if (rows[i].isFold == true) {\r\n                currentLevel = rows[i].level;\r\n                continue;\r\n            } else {\r\n                currentLevel = undefined;\r\n            }\r\n        }\r\n        this.rect.totalHeight = this.rows.length * this.options.lineHeight < this.rect.viewHeight - this.rect.headerHeight ? this.rows.length * this.options.lineHeight : (this.rows.length + 1) * this.options.lineHeight;\r\n        this.updateFrame();\r\n    }\r\n\r\n    private updateWidthByID(ID, width) {\r\n        this.frozenColumns = [];\r\n        this.activeColumns = [];\r\n        this.renderLeafCols = [];\r\n        this.renderFrozenCols = [];\r\n        this.leafActiveCols = [];\r\n        this.leafFrozenCols = [];\r\n        this.rect.totalWidth = 0;\r\n        this.rect.frozenWidth = 0;\r\n        this.calcPos(this.columns, 0, 0, ID, width);\r\n    }\r\n}\r\n\r\nexport { DataView };","class CanvasDraw {\r\n\r\n    public data: any;\r\n    public selectedRow: any;\r\n    public rowID: any;\r\n    public beforeRenderCell: any;\r\n    public beforeRenderIcon: any;\r\n    public beforeRenderColumn: any;\r\n    public beforeRenderRow: any;\r\n    public beforeRenderText: any;\r\n    public context: any;\r\n    private options: any;\r\n    private iconList: any;\r\n    private rect: any;\r\n    private tipsMap: any;\r\n    private treeWidth: any;\r\n\r\n    constructor(options) {\r\n        this.options = options;\r\n    }\r\n\r\n    public render() {\r\n        this.rect = this.data.rect;\r\n        this.context.textAlign = 'center';\r\n        this.context.textBaseline = 'middle';\r\n        this.context.clearRect(0, 0, this.rect.viewWidth, this.rect.viewHeight);\r\n        this.tipsMap = {};\r\n        this.treeWidth = this.getTreeWidth();\r\n        this.renderHeader();\r\n        this.renderBody();\r\n    }\r\n\r\n    private renderHeader() {\r\n        var frozenColumns = this.data.frozenColumns,\r\n            activeColumns = this.data.renderColumns,\r\n            renderFrozenCols = this.data.renderFrozenCols,\r\n            context = this.context,\r\n            options = this.options;\r\n        if (options.headerBackground) {\r\n            context.save();\r\n            context.fillStyle = options.headerBackground;\r\n            var height = options.headerHeight * this.data.colsLevel;\r\n            context.fillRect(0, 0, this.rect.viewWidth, height);\r\n            context.restore();\r\n        }\r\n        context.save();\r\n        context.fillStyle = options.headerColor ? options.headerColor : '#FFF';\r\n        context.strokeStyle = options.headerLineColor ? options.headerLineColor : '#F0F0F0';\r\n        context.font = options.headerFont ? options.headerFont : '12px Arial, Helvetica, sans-serif';\r\n        context.textAlign = options.headerAlign ? options.headerAlign : 'center';\r\n        context.lineWidth = options.lineWidth ? options.lineWidth : 1;\r\n        context.save();\r\n        context.translate(0 - this.rect.scrollLeft, 0);\r\n        for (var j = 0; j < activeColumns.length; j++) {\r\n            this.drawCell(activeColumns[j]);\r\n        }\r\n        context.restore();\r\n        context.clearRect(0, 0, this.rect.frozenWidth, this.rect.headerHeight);\r\n        if (options.headerBackground) {\r\n            context.save();\r\n            context.fillStyle = options.headerBackground;\r\n            height = options.headerHeight * this.data.colsLevel;\r\n            context.fillRect(0, 0, this.rect.frozenWidth, height);\r\n            context.restore();\r\n        }\r\n        for (var i = 0; i < renderFrozenCols.length; i++) {\r\n            this.drawCell(renderFrozenCols[i]);\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    private drawCell(data) {\r\n        var context = this.context, iconResult;\r\n        var x = data.x,\r\n            y = data.y,\r\n            w = (data.ID == 'tree' ? this.treeWidth : data.width),\r\n            h = data.height,\r\n            text = data.name,\r\n            textX = data.x,\r\n            textIndent = this.options.textIndent ? this.options.textIndent : 8,\r\n            textY = data.y + data.height * 0.5,\r\n            textW = (data.ID == 'tree' ? this.treeWidth : data.width) - 2 * textIndent,\r\n            options = this.options;\r\n        if (data.headerTextAlign || options.headerAlign) {\r\n            context.textAlign = data.headerTextAlign ? data.headerTextAlign : options.headerAlign;\r\n        } else {\r\n            context.textAlign = 'center';\r\n        }\r\n        if (data.headIcon && data.headIconList.length > 0) {\r\n            iconResult = this.renderIcon(data.headIconList, 'header', data, y, data.height);\r\n        }\r\n        if (iconResult) {\r\n            textX += iconResult.beforeTextIcon;\r\n            textW = iconResult.afterTextIcon - iconResult.beforeTextIcon - textIndent;\r\n        }\r\n        if (context.textAlign == \"center\" || data.headerTextAlign == 'center') {\r\n            context.textAlign = 'center';\r\n            textX = textX + textW * 0.5 + textIndent;\r\n        } else if (data.headerTextAlign == 'end') {\r\n            context.textAlign = 'end';\r\n            textX = textX + data.width - textIndent;\r\n        } else {\r\n            textX += textIndent;\r\n        }\r\n\r\n        if (data.noLine == 2) {\r\n            this.strokeRect(x - 0.5 - 40, y - 2, w + 40, h);\r\n        } else if (data.noLine != 1) {\r\n            this.strokeRect(x - 0.5, y - 2, w, h);\r\n        }\r\n        if (data.ID == 'tree' && this.data.rowLevel) {\r\n            context.save();\r\n            context.textAlign = 'center';\r\n            context.font = '12px Arial, Helvetica, sans-serif';\r\n            context.strokeStyle = this.options.treeColor;\r\n            for (var i = 0; i < this.data.rowLevel; i++) {\r\n                text = i + 1;\r\n                textX = x + data.textIndent + i * 20 + 10;\r\n                if (textX + 10 < data.x + this.treeWidth) {\r\n                    this.fillText(text, textX, textY, 20, data, \"header\");\r\n                    if (this.options.expandToLevel == true) {\r\n                        this.strokeRect(textX - 10, textY - 11, 20, 20);\r\n                    }\r\n                }\r\n            }\r\n            context.restore();\r\n            return;\r\n        }\r\n        this.fillText(text, textX, textY, textW, data, \"header\");\r\n    }\r\n\r\n    private renderBody() {\r\n        var rows = this.data.renderRows,\r\n            context = this.context,\r\n            options = this.options,\r\n            headerHeight = this.data.colsLevel * options.headerHeight;\r\n        if (rows.length <= 0) {\r\n            return;\r\n        }\r\n        context.save();\r\n        context.font = options.bodyFont ? options.bodyFont : '12px Arial, Helvetica, sans-serif';\r\n        context.fillStyle = options.bodyColor ? options.bodyColor : '#FFF';\r\n        context.strokeStyle = options.lineColor ? options.lineColor : '#F0F0F0';\r\n        context.lineWidth = options.lineWidth ? options.lineWidth : 1;\r\n        context.save();\r\n        context.translate(0 - this.rect.scrollLeft, headerHeight - this.rect.scrollTop);\r\n        for (var j = 0; j < rows.length; j++) {\r\n            this.renderRow(rows[j], this.data.renderLeafCols, j, true);\r\n        }\r\n        context.restore();\r\n        context.save();\r\n        context.translate(0, headerHeight - this.rect.scrollTop);\r\n        context.clearRect(0, this.rect.scrollTop, this.rect.frozenWidth, this.rect.viewHeight - headerHeight);\r\n        for (var i = 0; i < rows.length; i++) {\r\n            this.renderRow(rows[i], this.data.leafFrozenCols, i, false);\r\n        }\r\n        context.restore();\r\n        context.restore();\r\n        context.restore();\r\n    }\r\n\r\n    private getTreeWidth() {\r\n        if (!(this.data && this.data.columns)) {\r\n            return;\r\n        }\r\n        var len = this.data.columns.length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (this.data.columns[i].ID == \"tree\") {\r\n                if (this.data.columns[i].isColumnHide) {\r\n                    return 0;\r\n                }\r\n                return this.data.rowLevel * 20 + this.data.columns[i].textIndent * 2;\r\n            }\r\n        }\r\n    }\r\n\r\n    private renderRow(row, columns, num, isLeafCols) {\r\n        if (!row || columns.length <= 0) {\r\n            return;\r\n        }\r\n        var context = this.context,\r\n            options = this.options,\r\n            y = options.lineHeight * num + this.rect.scrollTop,\r\n            h = options.lineHeight,\r\n            rowOption, isLast = false;\r\n        if (options.hasHover == true && this.data.hoverTarget && row.NO == this.data.hoverTarget.row.NO) {\r\n            row['isHover'] = true;\r\n        } else {\r\n            row['isHover'] = false;\r\n        }\r\n        rowOption = this.beforeRenderRow ? this.beforeRenderRow(row) : null;\r\n        if (rowOption && rowOption.background) {\r\n            context.save();\r\n            context.fillStyle = rowOption.background;\r\n            if (options.formStyle == 1) {\r\n                if (isLeafCols) {\r\n                    context.fillRect(0 - 0.5 + this.treeWidth, y - 1, this.rect.viewWidth - this.treeWidth + this.rect.scrollLeft, h);\r\n                } else {\r\n                    context.fillRect(0 - 0.5 + this.treeWidth, y - 1, this.rect.frozenWidth - this.treeWidth, h);\r\n                }\r\n            } else {\r\n                context.fillRect(0 - 0.5 + this.rect.scrollLeft, y, this.rect.viewWidth, h);\r\n            }\r\n            context.restore();\r\n        }\r\n        if (options.borderLine == 'row') {\r\n            if (options.formStyle == 1) {\r\n                this.strokeRect(-1 + this.treeWidth, y - 1, this.rect.viewWidth + 2 + this.rect.scrollLeft, h);\r\n            } else {\r\n                this.strokeRect(-1 + this.rect.scrollLeft, y, this.rect.viewWidth + 2, h);\r\n            }\r\n        }\r\n        context.save();\r\n        if (rowOption && rowOption.font) {\r\n            context.font = rowOption.font;\r\n        }\r\n        for (var i = 0, len = columns.length; i < len; i++) {\r\n            if (i == len - 1) {\r\n                isLast = true;\r\n            }\r\n            this.renderCell(row, columns[i], num, isLast);\r\n        }\r\n        context.restore();\r\n    }\r\n    private renderCell(row, column, num, isLast) {\r\n        var context = this.context,\r\n            options = this.options,\r\n            cellOptions,\r\n            text = '',\r\n            e: any = {}, iconResult: any,\r\n            columnID = column.ID,\r\n            x = column.x,\r\n            y = options.lineHeight * num + this.rect.scrollTop,\r\n            w = column.width,\r\n            h = options.lineHeight,\r\n            textY = y + h * 0.5,\r\n            textX,\r\n            textW;\r\n        if (isLast == true) {\r\n            w -= 1;\r\n        }\r\n        e['column'] = column;\r\n        e['row'] = row;\r\n        cellOptions = this.beforeRenderCell ? this.beforeRenderCell(e) : null;\r\n        if (cellOptions && cellOptions.result == false) {\r\n            return;\r\n        }\r\n        if (columnID == 'tree' && this.treeWidth) {\r\n            this.drawTree(column, num);\r\n            return;\r\n        }\r\n        if (cellOptions && cellOptions.background) {\r\n            context.save();\r\n            context.fillStyle = cellOptions.background;\r\n            context.fillRect(x, y, w, h);\r\n            context.restore();\r\n        }\r\n        if (options.borderLine == 'all') {\r\n            this.strokeRect(x, y, w, h);\r\n        }\r\n\r\n        if (row[columnID] != undefined && row[columnID] != null) {\r\n            text = row[columnID];\r\n        }\r\n        if (column.inputType == 'inner') {\r\n            textX = column.inputStyle.left + column.x;\r\n            textW = column.inputStyle.width;\r\n            if (column.inputStyle.right) {\r\n                textW = column.width - column.inputStyle.left - column.inputStyle.right;\r\n            }\r\n            context.save();\r\n            if (cellOptions && cellOptions.lineColor) {\r\n                context.strokeStyle = cellOptions.lineColor;\r\n            }\r\n            if (cellOptions && cellOptions.lineWidth) {\r\n                context.lineWidth = cellOptions.lineWidth;\r\n            }\r\n            if (column.inputStyle.background) {\r\n                context.fillStyle = cellOptions.inputStyle.background ? cellOptions.inputStyle.background : column.inputStyle.background;\r\n                context.fillRect(textX, y + column.inputStyle.padding, textW, h - 2 * column.inputStyle.padding - 1);\r\n            }\r\n            this.strokeRect(textX, y + column.inputStyle.padding, textW, h - 2 * column.inputStyle.padding - 1);\r\n            context.restore();\r\n            if (cellOptions && cellOptions.editType == 'select') {\r\n                this.drawSelect(context, column.inputStyle.left + column.x, y + column.inputStyle.padding, column.inputStyle.width, h - 2 * column.inputStyle.padding);\r\n                textW -= 20;\r\n            }\r\n        }\r\n\r\n        if (column.hasIcon && column.iconList.length > 0) {\r\n            iconResult = this.renderIcon(column.iconList, row, column, y, this.options.lineHeight);\r\n        }\r\n\r\n        if (iconResult) {\r\n            if (column.textIndent) {\r\n                textX = x + iconResult.beforeTextIcon + column.textIndent;\r\n                textW = iconResult.afterTextIcon - iconResult.beforeTextIcon - column.textIndent;\r\n            } else {\r\n                textX = x + iconResult.beforeTextIcon + options.textIndent;\r\n                textW = iconResult.afterTextIcon - iconResult.beforeTextIcon - options.textIndent;\r\n            }\r\n        } else {\r\n            textX = column.textIndent ? x + column.textIndent : x + options.textIndent;\r\n            textW = column.textIndent ? w - column.textIndent * 2 : w - options.textIndent * 2;\r\n        }\r\n\r\n        if (text != undefined && text != null && textW > 0) {\r\n            this.renderText(text, textX, textY, textW, row, column);\r\n        }\r\n    }\r\n\r\n    private strokeRect(x, y, w, h) {\r\n        this.context.strokeRect(x + 0.5, y + 0.5, w, h);\r\n    }\r\n\r\n    private renderIcon(icons, row, column, y, height) {\r\n        var options = this.options,\r\n            iconOptions,\r\n            iconSrc, iconX,\r\n            iconW = this.options.iconSize,\r\n            iconH = this.options.iconSize,\r\n            iconY = y + (height - iconH) * 0.5,\r\n            beforeTextIcon = 0, afterTextIcon = column.width,\r\n            e = { row: row, column: column };\r\n        for (var i = 0, len = icons.length; i < len; i++) {\r\n            e['iconNum'] = i;\r\n            if (row.NO + '_' + column.ID + '_' + icons[i].operateType == this.data.hoverIcon) {\r\n                e['isHover'] = true;\r\n            } else {\r\n                e['isHover'] = false;\r\n            }\r\n            iconOptions = this.beforeRenderIcon ? this.beforeRenderIcon(e) : null;\r\n            iconSrc = icons[i].src;\r\n            if (iconOptions && iconOptions.result == true) {\r\n                iconSrc = iconOptions.src ? iconOptions.src : icons[i].src;\r\n            }\r\n            if (icons[i].left) {\r\n                iconX = column.x + icons[i].left;\r\n            } else if (icons[i].right) {\r\n                iconX = column.x + column.width - icons[i].right;\r\n            }\r\n            if (icons[i].position == 'beforeText') {\r\n                if (iconX + iconW - column.x > beforeTextIcon) {\r\n                    beforeTextIcon = iconX + iconW - column.x;\r\n                }\r\n            } else if (icons[i].position == 'afterText') {\r\n                if (iconX - column.x < afterTextIcon) {\r\n                    afterTextIcon = iconX - column.x;\r\n                }\r\n            }\r\n            if (iconOptions && iconOptions.result == false) {\r\n                continue;\r\n            }\r\n            if (iconX > column.x + column.width) {\r\n                return;\r\n            }\r\n            this.context.drawImage(options.iconList[iconSrc], iconX, iconY, iconW, iconH);\r\n        }\r\n        return {\r\n            'beforeTextIcon': beforeTextIcon,\r\n            'afterTextIcon': afterTextIcon,\r\n        };\r\n    }\r\n\r\n    private renderText(text, x, y, width, row, column) {\r\n        var e = { 'row': row, 'column': column };\r\n        var textOptions = this.beforeRenderText ? this.beforeRenderText(e) : null,\r\n            context = this.context;\r\n        context.save();\r\n        context.textAlign = column.textAlign;\r\n        if (textOptions && textOptions.color) {\r\n            context.fillStyle = textOptions.color;\r\n        }\r\n        if (textOptions && textOptions.font) {\r\n            context.font = textOptions.font;\r\n        }\r\n        if (textOptions && textOptions.text != undefined) {\r\n            text = textOptions.text;\r\n        }\r\n        if (context.textAlign == 'center') {\r\n            x = x + width * 0.5;\r\n        }\r\n        if (context.textAlign == 'end') {\r\n            x = x + width;\r\n        }\r\n        this.fillText(text, x, y, width, column, row.NO);\r\n        context.restore();\r\n    }\r\n\r\n    private fillText(text, x, y, width, column, rowIndex) {\r\n        var context = this.context;\r\n        if (context.measureText(text).width > width && !column.noOmit) {\r\n            if (this.options.uid != undefined) {\r\n                this.tipsMap[this.options.uid + \"_\" + rowIndex + \"_\" + column.ID] = text;\r\n            }\r\n            text = this.clipText(text.toString(), width);\r\n        }\r\n        context.fillText(text, x, y, width);\r\n    }\r\n\r\n    private clipText(text, width) {\r\n        var context = this.context, result: any = parseInt(width) / 6.6,\r\n            initiallyNum = parseInt(result),\r\n            newText = text.substring(0, initiallyNum);\r\n        if (context.measureText(newText + \"...\").width > width) {\r\n            for (var i = initiallyNum; context.measureText(newText + \"...\").width > width && i >= 0; i--) {\r\n                newText = text.substring(0, i);\r\n            }\r\n        } else {\r\n            for (var j = initiallyNum; context.measureText(newText + \"...\").width < width; j++) {\r\n                newText = text.substring(0, j);\r\n            }\r\n        }\r\n        return newText + \"...\";\r\n    }\r\n\r\n    private drawTree(column, rowNo) {\r\n        var row = this.data.renderRows[rowNo],\r\n            level = this.options.startLevel == 1 ? row.level : row.level + 1,\r\n            lineHeight = this.options.lineHeight,\r\n            x, y, lineType, isLast, expandType,\r\n            nextLevel, ctx = this.context;\r\n        if (this.data.renderRows[rowNo + 1]) {\r\n            nextLevel = this.options.startLevel == 1 ? this.data.renderRows[rowNo + 1].level : this.data.renderRows[rowNo + 1].level + 1;\r\n        }\r\n        ctx.save();\r\n        ctx.fillStyle = this.options.treeColor;\r\n        ctx.strokeStyle = this.options.treeColor;\r\n        if (row.isMiddleLevel) {\r\n            x = column.x + column.textIndent + (level - 1) * 20 + 3;\r\n            y = Math.floor((rowNo + 0.5) * lineHeight - 14 * 0.5) + this.rect.scrollTop;\r\n            if (row.isFold == true) {\r\n                expandType = true;\r\n            } else {\r\n                expandType = false;\r\n            }\r\n            if (x + 16 < column.width) {\r\n                this.drawExpand(ctx, x, y, 14, 14, expandType);\r\n            }\r\n        } else {\r\n            x = column.x + column.textIndent + (level - 1) * 20 + 10;\r\n            y = Math.floor((rowNo + 0.5) * lineHeight - 5 * 0.5) + this.rect.scrollTop;\r\n            if (x + 5 < column.width) {\r\n                this.drawSquare(ctx, x + 0.5, y + 0.5, 5, 5);\r\n            }\r\n        }\r\n        for (var i = level - 1; i > 0; i--) {\r\n            isLast = false;\r\n            x = column.x + column.textIndent + (i - 1) * 20 + 10;\r\n            y = rowNo * lineHeight + this.rect.scrollTop;\r\n            if (i == level - 1) {\r\n                isLast = true;\r\n            }\r\n            lineType = this.comparePath(level, nextLevel, i, isLast);\r\n            if (x + 16 < column.width) {\r\n                this.drawLine(ctx, x, y, 14, lineHeight, lineType);\r\n            }\r\n        }\r\n        ctx.restore();\r\n    }\r\n    private comparePath(level, nextLevel, index, isLast) {\r\n        var type = 'straight';\r\n        if (isLast && level > nextLevel || !nextLevel || (index >= nextLevel && level - nextLevel > 1)) {\r\n            type = 'break';\r\n        }\r\n        return type;\r\n    }\r\n\r\n    private drawSquare(ctx, x, y, w, h) {\r\n        ctx.fillRect(x + 0.5, y + 0.5, w, h);\r\n    }\r\n\r\n    private drawExpand(ctx, x, y, w, h, type) {\r\n        this.strokeRect(x, y, w, h);\r\n        ctx.beginPath();\r\n        ctx.moveTo(x + 3.5, y + 0.5 * h + 0.5);\r\n        ctx.lineTo(x + w - 2.5, y + 0.5 * h + 0.5);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n        if (type == true) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x + 0.5 * w + 0.5, y + 3.5);\r\n            ctx.lineTo(x + 0.5 * w + 0.5, y + h - 2.5);\r\n            ctx.stroke();\r\n            ctx.closePath();\r\n        } else {\r\n            ctx.beginPath();\r\n            ctx.save();\r\n            ctx.setLineDash(this.options.treeLineStyle);\r\n            ctx.moveTo(x + 0.5 * w + 0.5, y + h);\r\n            ctx.lineTo(x + 0.5 * w + 0.5, y + h + 12);\r\n            ctx.stroke();\r\n            ctx.restore();\r\n        }\r\n    }\r\n\r\n    private drawLine(ctx, x, y, w, h, type) {\r\n        ctx.save();\r\n        ctx.setLineDash(this.options.treeLineStyle);\r\n        if (type == 'straight') {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x + 0.5, y + 0.5);\r\n            ctx.lineTo(x + 0.5, y + h + 0.5);\r\n            ctx.stroke();\r\n        } else if (type == 'break') {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x + 0.5, y + 0.5);\r\n            ctx.lineTo(x + 0.5, y + 0.5 * h + 0.5);\r\n            if (this.options.formStyle == 1) {\r\n                ctx.lineTo(x + 10 + 0.5, y + 0.5 * h + 0.5);\r\n            } else {\r\n                ctx.lineTo(x + w + 0.5, y + 0.5 * h + 0.5);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n        ctx.restore();\r\n    }\r\n\r\n    private drawSelect(ctx, x, y, w, h) {\r\n        ctx.save();\r\n        ctx.strokeStyle = '#F2F2F9';\r\n        ctx.fillStyle = '#bbb';\r\n        ctx.beginPath();\r\n        ctx.moveTo(x + w - 18, y + h * 0.5 - 2);\r\n        ctx.lineTo(x + w - 10, y + h * 0.5 - 2);\r\n        ctx.lineTo(x + w - 14, y + h * 0.5 + 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\nexport { CanvasDraw as CanvasDraw };","import { Input } from '../component/input';\r\nimport { Select } from '../component/select';\r\nimport { ToolTip } from '../component/toolTip';\r\nimport { Scope } from '../component/scope';\r\nimport { PageSelect } from '../component/pageSelect';\r\n// import {History } from './canvas.grid.history';\r\n\r\nclass CanvasEvent {\r\n    public beforeInputShow: any;\r\n    public beforeSelectShow: any;\r\n    public afterSelectShow: any;\r\n    public cellClick: any;\r\n    public afterClick: any;\r\n    public afterInput: any;\r\n    public afterInputInit: any;\r\n    public afterSelected: any;\r\n    public afterSelectItem: any;\r\n    public afterAction: any;\r\n    public initSelectData: any;\r\n    public choseChecked: any;\r\n    public beforeToolTipShow: any;\r\n    public afterPaste: any;\r\n    public afterPasteComplete: any;\r\n    public afterResizeColumn: any;\r\n    public beforeCopy: any;\r\n    public beforeScroll: any;\r\n    public comboBoxChange: any;\r\n    public beforeClick: any;\r\n    private container: any;\r\n    private hoverEvent: any;\r\n    private form: any;\r\n    private Input: Input;\r\n    private Scope;\r\n    private pageSelect;\r\n    private Select: Select;\r\n    private ToolTip: ToolTip;\r\n    private isDestory = true;\r\n    private curTarget: any;\r\n    private firstTarget: any;\r\n    private lastTarget: any;\r\n    private selectText: any;\r\n    private copyArea: any;\r\n    private options: any;\r\n    private rect: any;\r\n    private timeId: any;\r\n    private dragTimeId: any;\r\n    private state: any = '';\r\n    private selectState: any = 'none';\r\n    private dragTarget: any;\r\n    private dragCell: any;\r\n    private mousePos: any;\r\n    private hoverTarget: any;\r\n    private leaveDirection: any;\r\n    private scrollX: any;\r\n    private scrollY: any;\r\n    private scrollStartPosX;\r\n    private scrollStartPosY;\r\n    private scrollBarType;\r\n    private selectedRange: any = {};\r\n    private inputState: any;\r\n    // private History: History;\r\n\r\n    constructor(form) {\r\n        this.form = form;\r\n        this.options = form.options;\r\n        this.rect = form.dataView.rect;\r\n        this.hoverTarget = form.dataView.hoverTarget;\r\n        this.container = 'eventOf' + this.options.name;\r\n        this.Input = new Input();\r\n        this.ToolTip = new ToolTip();\r\n        this.pageSelect = new PageSelect(this);\r\n        this.scrollDragEnd = this.scrollDragEnd.bind(this);\r\n        this.setScrollPos = this.setScrollPos.bind(this);\r\n        // this.History = new History();\r\n    }\r\n\r\n    public init() {\r\n        this.initEvent();\r\n        if (this.options.hasCellSelect) {\r\n            this.Scope = new Scope(this.container, this.options.name, this.rect);\r\n            this.copyArea = document.getElementById('copyAreaOf' + this.options.name);\r\n        }\r\n        if (this.options.hasPageSelect) {\r\n            this.pageSelect.init(this.container, this.options);\r\n        }\r\n        this.Select = new Select(this.options.container, this.options.name);\r\n        this.Select.initSelectData = this.initSelectData;\r\n        this.Select.afterSelected = this.afterSelected;\r\n        this.Input.afterInputInit = this.afterInputInit;\r\n        this.Input.afterInput = this.afterInput;\r\n        this.Input.init(this.options.name, this.rect);\r\n    }\r\n\r\n    public destoryEvent(e) {\r\n        window['active'] = 'document';\r\n        clearInterval(window['directionTimeID']);\r\n        window['directionTimeID'] = null;\r\n        this.destory();\r\n        this.destoryScope();\r\n        this.selectedRange = {};\r\n    }\r\n\r\n    public updateScroll() {\r\n        this.setScrollPos(this.rect.scrollLeft, this.rect.scrollTop);\r\n    }\r\n\r\n    public destoryScope(name?, target?) {\r\n        if (this.options.hasCellSelect == true) {\r\n            if (name) {\r\n                this.Scope.destory(name);\r\n                if (!target || this.container != window[\"active\"]) {\r\n                    this.curTarget = null;\r\n                    this.firstTarget = null;\r\n                    this.lastTarget = null;\r\n                }\r\n            } else {\r\n                this.Scope.destory();\r\n                this.curTarget = null;\r\n                this.firstTarget = null;\r\n                this.lastTarget = null;\r\n            }\r\n        }\r\n        this.selectState = 'none';\r\n    }\r\n\r\n    public scrollIntoView(isCenter?) {\r\n        var height = this.form.dataView.selectedRowByRender * this.rect.lineHeight, scrollTop;\r\n        if (isCenter) {\r\n            if (height <= this.rect.scrollTop) {\r\n                if (height < Math.floor((this.rect.viewHeight - this.rect.headerHeight) / 2)) {\r\n                    scrollTop = 0;\r\n                } else {\r\n                    scrollTop = height - Math.floor((this.rect.viewHeight - this.rect.headerHeight) / 2);\r\n                }\r\n            } else if (height > this.rect.scrollTop + this.rect.viewHeight - this.rect.headerHeight) {\r\n                scrollTop = height - Math.floor((this.rect.viewHeight - this.rect.headerHeight) / 2);\r\n            }\r\n        } else {\r\n            if (height - this.rect.lineHeight <= this.rect.scrollTop) {\r\n                scrollTop = height - this.rect.lineHeight;\r\n            } else if (height + this.rect.lineHeight > this.rect.scrollTop + this.rect.viewHeight - this.rect.headerHeight) {\r\n                scrollTop = height - this.rect.viewHeight + this.rect.headerHeight + this.rect.lineHeight;\r\n            }\r\n        }\r\n        this.setScrollPos(undefined, scrollTop);\r\n    }\r\n\r\n    public onfocus() {\r\n        document.getElementById('eventOf' + this.options.name).focus();\r\n        window['active'] = this.container;\r\n    }\r\n    public onblur() {\r\n        document.getElementById('eventOf' + this.options.name).blur();\r\n    }\r\n    public updateCurtarget(row, isLastRow) {\r\n        if (!this.curTarget) {\r\n            this.curTarget = {};\r\n            var columns = this.form.dataView.columns,\r\n                column;\r\n            for (var i = 0; i < columns.length; i++) {\r\n                if (!columns[i].isColumnHide && columns[i].ID != 'tree') {\r\n                    column = columns[i];\r\n                    break;\r\n                }\r\n            }\r\n            this.curTarget.column = column;\r\n        }\r\n        this.curTarget.row = row;\r\n        this.firstTarget = this.curTarget;\r\n        this.lastTarget = this.curTarget;\r\n        if (isLastRow) {\r\n            this.updateScope();\r\n        }\r\n    }\r\n\r\n    private setScrollPos(scrollLeft, scrollTop) {\r\n        if (scrollLeft != undefined) {\r\n            this.rect.scrollLeft = scrollLeft;\r\n            if (this.rect.scrollLeft > this.rect.totalWidth - this.rect.viewWidth) {\r\n                this.rect.scrollLeft = this.rect.totalWidth - this.rect.viewWidth;\r\n            }\r\n            if (this.rect.scrollLeft < 0) {\r\n                this.rect.scrollLeft = 0;\r\n            }\r\n        }\r\n        if (scrollTop != undefined) {\r\n            this.rect.scrollTop = scrollTop;\r\n            if (this.rect.scrollTop > this.rect.totalHeight - this.rect.viewHeight + this.rect.headerHeight) {\r\n                this.rect.scrollTop = this.rect.totalHeight - this.rect.viewHeight + this.rect.headerHeight;\r\n            }\r\n            if (this.rect.scrollTop <= 0) {\r\n                this.rect.scrollTop = 0;\r\n            }\r\n        }\r\n        this.scroll();\r\n    }\r\n\r\n    private updateScrollBarPos() {\r\n        var viewHeight = this.rect.viewHeight - this.rect.headerHeight;\r\n        this.scrollX.style.left = this.rect.scrollLeft * this.rect.viewWidth / this.rect.totalWidth + 'px';\r\n        this.scrollY.style.top = this.rect.scrollTop * viewHeight / this.rect.totalHeight + this.rect.headerHeight + 'px';\r\n    }\r\n\r\n    private initEvent() {\r\n        var options = this.options,\r\n            eventLayer = document.querySelector('#eventOf' + options.name),\r\n            mousewheel = 'mousewheel';\r\n        if (document.onmousewheel === undefined) {\r\n            mousewheel = 'DOMMouseScroll';\r\n        }\r\n        document.onclick = this.destoryEvent.bind(this);\r\n        this.scrollX = document.querySelector('#scrollX' + options.name);\r\n        this.scrollY = document.querySelector('#scrollY' + options.name);\r\n        this.scrollX.addEventListener('mousedown', this.scrollDragstart.bind(this));\r\n        this.scrollY.addEventListener('mousedown', this.scrollDragstart.bind(this));\r\n        eventLayer.removeEventListener('click', this.click.bind(this));\r\n        eventLayer.addEventListener('click', this.click.bind(this));\r\n        eventLayer.removeEventListener('contextmenu', this.contextmenu.bind(this));\r\n        eventLayer.addEventListener('contextmenu', this.contextmenu.bind(this));\r\n        eventLayer.removeEventListener(mousewheel, this.mousewheel.bind(this));\r\n        eventLayer.addEventListener(mousewheel, this.mousewheel.bind(this));\r\n        eventLayer.removeEventListener('mousemove', this.mousemove.bind(this));\r\n        eventLayer.addEventListener('mousemove', this.mousemove.bind(this));\r\n        eventLayer.removeEventListener('mouseleave', this.mouseLeave.bind(this));\r\n        eventLayer.addEventListener('mouseleave', this.mouseLeave.bind(this));\r\n        eventLayer.removeEventListener('mouseenter', this.mouseEnter.bind(this));\r\n        eventLayer.addEventListener('mouseenter', this.mouseEnter.bind(this));\r\n        eventLayer.removeEventListener('mouseup', this.mouseup.bind(this));\r\n        eventLayer.addEventListener('mouseup', this.mouseup.bind(this));\r\n        eventLayer.removeEventListener(\"keydown\", this.handleKeyDown.bind(this));\r\n        eventLayer.addEventListener(\"keydown\", this.handleKeyDown.bind(this));\r\n    }\r\n    private click(e) {\r\n        if (window['active'] != this.container) {\r\n            window['active'] = this.container;\r\n            return;\r\n        }\r\n        var target = this.getCurrentCell(e), result, state;\r\n        e.stopPropagation();\r\n        this.onfocus();\r\n        if (this.dragTimeId) {\r\n            clearTimeout(this.dragTimeId);\r\n            this.dragTimeId = undefined;\r\n        }\r\n        this.destory();\r\n        if (this.state == 'drag') {\r\n            this.state = '';\r\n            return;\r\n        }\r\n        if (this.inputState == 'inputing') {\r\n            this.inputState = '';\r\n        }\r\n        if (e.shiftKey != true) {\r\n            this.destoryScope(this.container, target);\r\n        } else {\r\n            this.handleScroll(target);\r\n            this.firstTarget = this.curTarget ? this.curTarget : this.firstTarget;\r\n            this.lastTarget = target;\r\n            if (!this.firstTarget) {\r\n                return;\r\n            }\r\n            if (target.row == 'header') {\r\n                this.firstTarget.row = this.form.dataView.rows[0];\r\n                this.lastTarget['row'] = this.form.dataView.rows[this.form.dataView.rows.length - 1];\r\n                this.lastTarget['column'] = target.column;\r\n            }\r\n            var index = this.firstTarget.row.index < this.lastTarget.row.index ? this.firstTarget.row.index : this.lastTarget.row.index;\r\n            this.setSelectedRow(index);\r\n            this.updateScope();\r\n            this.getSelectItems(this.firstTarget, this.lastTarget);\r\n            this.selectState = 'double';\r\n            return;\r\n        }\r\n\r\n        if (this.lastTarget || this.firstTarget) {\r\n            this.firstTarget = null;\r\n            this.lastTarget = null;\r\n        }\r\n        if (this.cellClick) {\r\n            this.cellClick();\r\n        }\r\n        if (!target) {\r\n            return;\r\n        }\r\n        result = this.afterClick(target);\r\n        if (!result) {\r\n            return;\r\n        }\r\n        if (target.row == 'header') {\r\n            this.handleHeader(target);\r\n            return;\r\n        }\r\n        if (this.options.hasCellSelect == true && target.column.ID != 'tree') {\r\n            target = this.handleScroll(target);\r\n            if (target.actionType && target.actionType.type == 'operate') {\r\n                this.clickEventAssignment(target);\r\n            } else if (this.curTarget && this.curTarget.row == target.row && this.curTarget.column.ID == target.column.ID) {\r\n                this.clickEventAssignment(target);\r\n                state = true;\r\n            } else if (target.column.clickShow) {\r\n                if (this.beforeClick && this.beforeClick(target)) {\r\n                    this.clickEventAssignment(target);\r\n                }\r\n\r\n            }\r\n            if (!state) {\r\n                this.Scope.changeState('none');\r\n            }\r\n            this.setSelectedRow(target.row.index);\r\n            this.showScope(target);\r\n            this.curTarget = target;\r\n            this.selectState = 'single';\r\n        } else {\r\n            this.clickEventAssignment(target);\r\n        }\r\n    }\r\n\r\n    private contextmenu(e) {\r\n        e.preventDefault();\r\n    }\r\n\r\n    private mousewheel(e) {\r\n        var scrollLeft, scrollTop;\r\n        if (e.type == 'DOMMouseScroll') {\r\n            e.wheelDelta = -e.detail;\r\n        }\r\n        if (e.shiftKey) {\r\n            e.preventDefault();\r\n            if (this.rect.totalWidth <= this.rect.viewWidth) {\r\n                return;\r\n            }\r\n            if (e.wheelDelta < 0) {\r\n                scrollLeft = this.rect.scrollLeft + 50;\r\n            } else {\r\n                scrollLeft = this.rect.scrollLeft - 50;\r\n            }\r\n        } else {\r\n            if (this.rect.totalHeight <= this.rect.viewHeight - this.rect.headerHeight) {\r\n                return;\r\n            }\r\n            if (e.wheelDelta < 0) {\r\n                scrollTop = this.rect.scrollTop + this.options.lineHeight;\r\n            } else {\r\n                scrollTop = this.rect.scrollTop - this.options.lineHeight;\r\n            }\r\n        }\r\n        if (this.beforeScroll) {\r\n            this.beforeScroll();\r\n        }\r\n        this.setScrollPos(scrollLeft, scrollTop);\r\n    }\r\n\r\n    private scroll() {\r\n        if (window['active'] != this.container) {\r\n            this.destoryScope(this.container);\r\n        }\r\n        this.destory();\r\n        this.updateScrollBarPos();\r\n        this.form.update();\r\n        if (this.options.hasCellSelect) {\r\n            if (this.lastTarget && window['active'] == this.container) {\r\n                this.updateScope();\r\n            } else {\r\n                this.showScope(this.curTarget);\r\n            }\r\n        }\r\n    }\r\n\r\n    private scrollDragstart(e) {\r\n        document.body.onmousemove = this.scrollDraging.bind(this);\r\n        var body = document.getElementsByTagName('body');\r\n        body[0].addEventListener('click', this.scrollDragEnd);\r\n        body[0].addEventListener('mouseleave', this.scrollDragEnd);\r\n        if (e.target.id.indexOf('scrollX') >= 0) {\r\n            this.scrollBarType = 'scrollX';\r\n            this.scrollX.style.background = 'rgba(102,102,102,0.8)';\r\n            this.scrollStartPosX = e.screenX;\r\n        } else {\r\n            this.scrollBarType = 'scrollY';\r\n            this.scrollY.style.background = 'rgba(102,102,102,0.8)';\r\n            this.scrollStartPosY = e.screenY;\r\n        }\r\n        if (this.beforeScroll) {\r\n            this.beforeScroll();\r\n        }\r\n        this.state = 'scrollDrag';\r\n    }\r\n\r\n    private scrollDraging(e) {\r\n        var scrollLeft, scrollTop;\r\n        e.preventDefault();\r\n        if (this.scrollBarType == 'scrollX') {\r\n            scrollLeft = this.rect.scrollLeft + (e.screenX - this.scrollStartPosX) * (this.rect.totalWidth / this.rect.viewWidth);\r\n            this.scrollStartPosX = e.screenX;\r\n        } else {\r\n            scrollTop = this.rect.scrollTop + (e.screenY - this.scrollStartPosY) * (this.rect.totalHeight / (this.rect.viewHeight - this.rect.headerHeight));\r\n            this.scrollStartPosY = e.screenY;\r\n        }\r\n        this.setScrollPos(scrollLeft, scrollTop);\r\n    }\r\n\r\n    private scrollDragEnd(e) {\r\n        e.stopPropagation();\r\n        this.scrollX.style.background = 'rgba(153,153,153,0.8)';\r\n        this.scrollY.style.background = 'rgba(153,153,153,0.8)';\r\n        document.body.onmousemove = null;\r\n        var body = document.getElementsByTagName('body');\r\n        body[0].removeEventListener('click', this.scrollDragEnd);\r\n        body[0].removeEventListener('mouseleave', this.scrollDragEnd);\r\n        this.state = '';\r\n        this.onfocus();\r\n    }\r\n\r\n    private mousemove(e) {\r\n        if (e.buttons == 1) {\r\n            if (this.timeId) {\r\n                clearTimeout(this.timeId);\r\n                this.timeId = undefined;\r\n            }\r\n            if (this.state != 'drag') {\r\n                this.ToolTip.destory();\r\n            }\r\n            this.handleDrag(e);\r\n        } else {\r\n            if (this.hoverEvent && e.screenX == this.hoverEvent.screenX && e.screenY == this.hoverEvent.screenY) {\r\n                return;\r\n            }\r\n            if (this.state == 'resizeCol' && this.dragCell) {\r\n                this.dragCell.parentNode.removeChild(this.dragCell);\r\n                this.dragCell = null;\r\n                this.dragTarget = null;\r\n            }\r\n            this.ToolTip.destory();\r\n            this.dragCancel();\r\n            this.hoverEvent = e;\r\n            this.handleHover(e);\r\n        }\r\n    }\r\n\r\n    private mouseLeave(e) {\r\n        if (e.buttons == 1) {\r\n            this.dragEnd(e.clientX);\r\n        } else {\r\n            if (this.timeId) {\r\n                clearTimeout(this.timeId);\r\n                this.timeId = undefined;\r\n            }\r\n        }\r\n        if (this.state == \"drag\") {\r\n            this.leaveDirection = this.getLeaveDirection(e);\r\n            this.moveScrollBar(this.leaveDirection);\r\n        }\r\n    }\r\n\r\n    private mouseEnter(e) {\r\n        this.leaveDirection = \"\";\r\n        if (e.buttons == 0 || window['directionTimeID'] || this.state == 'drag' || this.state == 'scrollDrag') {\r\n            window[\"active\"] = this.container;\r\n        } else {\r\n            window[\"active\"] = 'document';\r\n        }\r\n        clearInterval(window['directionTimeID']);\r\n        window['directionTimeID'] = null;\r\n    }\r\n\r\n    private getLeaveDirection(e) {\r\n        var left = this.form.context.canvas.getBoundingClientRect().left,\r\n            top = this.form.context.canvas.getBoundingClientRect().top,\r\n            width = this.form.context.canvas.getBoundingClientRect().width,\r\n            height = this.form.context.canvas.getBoundingClientRect().height,\r\n            x = (e.clientX - left - width / 2) * (width > height ? (height / width) : 1),\r\n            y = (e.clientY - top - height / 2) * (height > width ? (width / height) : 1),\r\n            dirName = ['top', 'right', 'bottom', 'left'],\r\n            direction = Math.round((((Math.atan2(y, x) * 180 / Math.PI) + 180) / 90) + 3) % 4;\r\n        return dirName[direction];\r\n    }\r\n    private moveScrollBar(direction) {\r\n        var totalWidth = this.form.dataView.rect.totalWidth,\r\n            totalHeight = this.form.dataView.rect.totalHeight + this.form.options.lineHeight,\r\n            viewWidth = this.form.dataView.rect.viewWidth,\r\n            viewHeight = this.rect.viewHeight - this.rect.headerHeight,\r\n            _self = this;\r\n        switch (direction) {\r\n            case \"top\":\r\n                window['directionTimeID'] = setInterval(function () {\r\n                    _self.rect.scrollTop -= 10;\r\n                    if (_self.rect.scrollTop <= 0) {\r\n                        clearInterval(window['directionTimeID']);\r\n                        window['directionTimeID'] = null;\r\n                    }\r\n                    _self.setScrollPos(undefined, _self.rect.scrollTop);\r\n                }, 10);\r\n                break;\r\n            case \"right\":\r\n                window['directionTimeID'] = setInterval(function () {\r\n                    _self.rect.scrollLeft += 10;\r\n                    if (_self.rect.scrollLeft >= totalWidth - viewWidth) {\r\n                        clearInterval(window['directionTimeID']);\r\n                        window['directionTimeID'] = null;\r\n                    }\r\n                    _self.setScrollPos(_self.rect.scrollLeft, undefined);\r\n                }, 10);\r\n                break;\r\n            case \"bottom\":\r\n                window['directionTimeID'] = setInterval(function () {\r\n                    _self.rect.scrollTop += 10;\r\n                    if (_self.rect.scrollTop >= totalHeight - viewHeight) {\r\n                        clearInterval(window['directionTimeID']);\r\n                        window['directionTimeID'] = null;\r\n                    }\r\n                    _self.setScrollPos(undefined, _self.rect.scrollTop);\r\n                }, 10);\r\n                break;\r\n            default:\r\n                window['directionTimeID'] = setInterval(function () {\r\n                    _self.rect.scrollLeft -= 10;\r\n                    if (_self.rect.scrollLeft <= 0) {\r\n                        clearInterval(window['directionTimeID']);\r\n                        window['directionTimeID'] = null;\r\n                    }\r\n                    _self.setScrollPos(_self.rect.scrollLeft, undefined);\r\n                }, 10);\r\n        }\r\n    }\r\n\r\n    private mouseup(e) {\r\n        if (this.state == 'resizeCol') {\r\n            this.dragEnd(e.clientX);\r\n            window['active'] = this.container;\r\n            return;\r\n        }\r\n        e.stopPropagation();\r\n        if (window['active'] != this.container) {\r\n            window['active'] = this.container;\r\n            return false;\r\n        }\r\n        var index;\r\n        if (this.state != 'drag') {\r\n            return false;\r\n        }\r\n        if (this.firstTarget && this.lastTarget) {\r\n            index = this.firstTarget.row.index < this.lastTarget.row.index ? this.firstTarget.row.index : this.lastTarget.row.index;\r\n            this.setSelectedRow(index);\r\n            this.getSelectItems(this.firstTarget, this.lastTarget);\r\n            this.selectState = 'double';\r\n            this.curTarget = null;\r\n        }\r\n    }\r\n\r\n    private copy(e) {\r\n        var copyText = this.selectText;\r\n        if (copyText == '') {\r\n            copyText = ' ';\r\n        }\r\n        if (copyText) {\r\n            this.copyArea.value = copyText;\r\n            this.copyArea.select();\r\n            this.Scope.changeState();\r\n        }\r\n    }\r\n\r\n    private paste(e, operateDataList?, type?) {\r\n        if (!this.selectedRange || !this.selectedRange.rows || !this.selectedRange.columns) {\r\n            return;\r\n        }\r\n        var clipText = this.copyArea.value,\r\n            Data = this.form.dataView.rows,\r\n            items,\r\n            row = [],\r\n            line = [],\r\n            columns = this.selectedRange.columns,\r\n            rows = this.selectedRange.rows,\r\n            target = {},\r\n            reg = /\\r/;\r\n        if (type) {\r\n            columns = operateDataList.selectedRange.columns;\r\n            rows = operateDataList.selectedRange.rows;\r\n        }\r\n        items = clipText.split(\"\\n\");\r\n        if (!items[items.length - 1] && items[items.length - 1] !== 0) {\r\n            items.pop();\r\n        }\r\n        for (var k = 0; k < items.length; k++) {\r\n            items[k] = items[k].split(\"\\t\");\r\n        }\r\n        if (items.length > 0) {\r\n            if (items.length == 1 && rows.length > 1) {\r\n                for (var g = 1; g < rows.length; g++) {\r\n                    items[g] = items[0];\r\n                }\r\n            } else if (rows.length % items.length == 0 && rows.length != items.length) {\r\n                var newItem = [];\r\n                for (var f = 0; f < items.length; f++) {\r\n                    for (var d = f; d < rows.length; d += items.length) {\r\n                        newItem[d] = items[f];\r\n                    }\r\n                }\r\n                items = newItem;\r\n            }\r\n            if (items[0].length == 1 && columns.length > 1) {\r\n                for (var p = 0; p < items.length; p++) {\r\n                    for (var q = 0; q < columns.length; q++) {\r\n                        items[p][q] = items[p][0];\r\n                    }\r\n                }\r\n            }\r\n            for (var i = 0; i < items.length; i++) {\r\n                if ((Data.length == i) || (rows[0].showNo + i > Data.length)) {\r\n                    break;\r\n                }\r\n                row[i] = Data[rows[0].showNo - 1 + i];\r\n            }\r\n            for (var j = 0; j < items[0].length; j++) {\r\n                if (columns.length == 1) {\r\n                    line = this.findColumns(columns[0], items[0].length);\r\n                    break;\r\n                }\r\n                line[j] = columns[j];\r\n            }\r\n            for (var m = 0; m < row.length; m++) {\r\n                target[\"row\"] = row[m];\r\n                for (var n = 0; n < line.length; n++) {\r\n                    target[\"column\"] = line[n];\r\n                    target[\"value\"] = String(items[m][n]).replace(reg, \"\");\r\n                    if (type == 'undo' && operateDataList) {\r\n                        target[\"value\"] = operateDataList.data[m][n].from.toString();\r\n                    } else if (type == 'redo' && operateDataList) {\r\n                        target[\"value\"] = operateDataList.data[m][n].to.toString();\r\n                    }\r\n                    this.afterPaste(target, m, n);\r\n                }\r\n            }\r\n            // \r\n            if (this.afterPasteComplete) {\r\n                if (!type) {\r\n                    this.afterPasteComplete(this.selectedRange);\r\n                } else {\r\n                    this.afterPasteComplete();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private findColumns(row, num) {\r\n        var leafFrozenCols = this.form.dataView.leafFrozenCols,\r\n            leafActiveCols = this.form.dataView.leafActiveCols, columns = [], leafColumns;\r\n        if (row.isFrozen == true) {\r\n            leafColumns = leafFrozenCols.concat(leafActiveCols);\r\n        } else {\r\n            leafColumns = leafActiveCols;\r\n        }\r\n        for (var i = row.index; i < leafColumns.length; i++) {\r\n            if (columns.length >= num) {\r\n                break;\r\n            }\r\n            if (leafColumns[i].isColumnHide != true) {\r\n                columns.push(leafColumns[i]);\r\n            }\r\n        }\r\n        return columns;\r\n    }\r\n    private getCurrentCell(e) {\r\n        var options = this.options,\r\n            container = document.querySelector('#eventOf' + options.name),\r\n            x = e.clientX - container.getBoundingClientRect().left,\r\n            y = e.clientY - container.getBoundingClientRect().top,\r\n            headerHeight = this.rect.headerHeight,\r\n            rows = this.form.dataView.renderRows,\r\n            target: any = { rect: {} },\r\n            scrollLeft = this.rect.scrollLeft,\r\n            numbers, columns;\r\n        if (!x || !y || x > container.clientWidth || y > container.clientHeight) {\r\n            return;\r\n        }\r\n        target.rect.clickX = x;\r\n        target.rect.clickY = y;\r\n        if (y < headerHeight) {\r\n            target.rect.x = x;\r\n            target.rect.y = y;\r\n            target.row = 'header';\r\n        } else {\r\n            numbers = Math.floor((y - headerHeight) / options.lineHeight);\r\n            if (numbers <= rows.length) {\r\n                target.row = rows[numbers];\r\n                target.rect.top = headerHeight + numbers * options.lineHeight;\r\n                target.rect.height = options.lineHeight;\r\n            }\r\n        }\r\n        if (x < this.rect.frozenWidth) {\r\n            columns = target.row == 'header' ? this.form.dataView.frozenColumns : this.form.dataView.leafFrozenCols;\r\n            scrollLeft = 0;\r\n        } else {\r\n            columns = target.row == 'header' ? this.form.dataView.renderColumns : this.form.dataView.renderLeafCols;\r\n        }\r\n        for (var i = 0, len = columns.length; i < len; i++) {\r\n            if (columns[i].isColumnHide) {\r\n                continue;\r\n            }\r\n            if (columns[i].x - scrollLeft >= x || x >= columns[i].x + columns[i].width - scrollLeft) {\r\n                continue;\r\n            }\r\n            if (target.row == 'header' && (columns[i].y >= y || y >= columns[i].y + columns[i].height)) {\r\n                continue;\r\n            }\r\n            target.column = columns[i];\r\n            target.rect.left = columns[i].x - scrollLeft;\r\n            target.rect.width = columns[i].width;\r\n            break;\r\n        }\r\n        if (!target.column && x >= this.rect.frozenWidth) {\r\n            for (var j = columns.length - 1; j >= 0; j--) {\r\n                if (x >= columns[j].x + columns[j].width - scrollLeft && x <= columns[j].x + columns[j].width - scrollLeft + 8 && !columns[j].isColumnHide) {\r\n                    target.column = columns[j];\r\n                    target.rect.left = columns[j].x - scrollLeft;\r\n                    target.rect.width = columns[j].width;\r\n                    break;\r\n                }\r\n            }\r\n            if (!target.column && x - this.rect.frozenWidth <= 8) {\r\n                var frozenColumns = target.row == 'header' ? this.form.dataView.frozenColumns : this.form.dataView.leafFrozenCols;\r\n                target.column = frozenColumns[frozenColumns.length - 1];\r\n                target.rect.left = frozenColumns[frozenColumns.length - 1].x - scrollLeft;\r\n                target.rect.width = frozenColumns[frozenColumns.length - 1].width;\r\n            }\r\n        }\r\n        target.actionType = this.getActionType(target);\r\n        if (target.row && target.column) {\r\n            return target;\r\n        }\r\n    }\r\n\r\n    private clickEventAssignment(target) {\r\n        if (!target.actionType) {\r\n            return;\r\n        }\r\n        if (target.row == 'header') {\r\n            this.handleHeader(target);\r\n        } else {\r\n            this.handleBody(target);\r\n        }\r\n    }\r\n\r\n    private handleHeader(target) {\r\n        if (target.actionType.type == 'operate') {\r\n            this.destoryScope();\r\n            this.doAction(target);\r\n            return;\r\n        }\r\n        this.selectColumn(target);\r\n    }\r\n\r\n    private handleBody(target) {\r\n        switch (target.actionType.type) {\r\n            case 'operate':\r\n                this.doAction(target);\r\n                break;\r\n            case 'input':\r\n                this.showEdit(target);\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n\r\n    private getActionType(target) {\r\n        if (!target.column || !target.row) {\r\n            return;\r\n        }\r\n        var delatX = target.rect.clickX - target.rect.left,\r\n            deltaY = target.rect.clickY - target.rect.top,\r\n            iconList = target.column.iconList,\r\n            column = target.column,\r\n            options: any = {},\r\n            headIconList = target.column.headIconList,\r\n            inputWidth;\r\n        if (target.column && target.column.ID == 'tree') {\r\n            if (target.row && target.row.isMiddleLevel) {\r\n                var level = this.options.startLevel == 1 ? target.row.level - 1 : target.row.level;\r\n                if (20 * level + column.textIndent + 3 < delatX && delatX < 20 * level + column.textIndent + 17) {\r\n                    if ((this.options.lineHeight - 14) * 0.5 < deltaY && deltaY < (this.options.lineHeight - 14) * 0.5 + 14) {\r\n                        options['type'] = 'operate';\r\n                        options['operateType'] = 'expand';\r\n                    }\r\n                }\r\n            }\r\n            if (target.row == 'header' && (delatX - column.textIndent) / 20 > 0) {\r\n                options['type'] = 'operate';\r\n                options['operateType'] = 'expandToLevel';\r\n                options['expandToLevel'] = Math.ceil((delatX - column.textIndent) / 20);\r\n            }\r\n        }\r\n        if (iconList && iconList.length > 0 && target.row != 'header') {\r\n            for (var i = 0, len = iconList.length; i < len; i++) {\r\n                if (iconList[i].left && iconList[i].left < delatX && delatX < (iconList[i].left + this.options.iconSize)) {\r\n                    options['type'] = iconList[i].type;\r\n                    options['operateType'] = iconList[i].operateType;\r\n                    if (iconList[i].hoverSrc != undefined) {\r\n                        options['isIcon'] = true;\r\n                    }\r\n                }\r\n                if (iconList[i].right && column.width - iconList[i].right < delatX && delatX < column.width - iconList[i].right + this.options.iconSize) {\r\n                    options['type'] = iconList[i].type;\r\n                    options['operateType'] = iconList[i].operateType;\r\n                    options['isIcon'] = true;\r\n                    if (iconList[i].hoverSrc != undefined) {\r\n                        options['isIcon'] = true;\r\n                    }\r\n                }\r\n            }\r\n        } else if (headIconList && headIconList.length > 0 && target.row == 'header') {\r\n            for (var j = 0, length = headIconList.length; j < length; j++) {\r\n                if (headIconList[j].left && headIconList[j].left < delatX && delatX < (headIconList[j].left + this.options.iconSize)) {\r\n                    options['type'] = headIconList[j].type;\r\n                    options['operateType'] = headIconList[j].operateType;\r\n                }\r\n                if (headIconList[j].right && column.width - headIconList[j].right < delatX && delatX < column.width - headIconList[j].right + this.options.iconSize) {\r\n                    options['type'] = headIconList[j].type;\r\n                    options['operateType'] = headIconList[j].operateType;\r\n                }\r\n            }\r\n        }\r\n        if (column.inputType == 'inner' && target.row != 'header') {\r\n            inputWidth = column.inputStyle.width;\r\n            if (column.inputStyle.right) {\r\n                inputWidth = column.width - column.inputStyle.left - column.inputStyle.right;\r\n            }\r\n            if (column.inputStyle.left < delatX && delatX < column.inputStyle.left + inputWidth && options['type'] != 'operate') {\r\n                options['type'] = 'input';\r\n            }\r\n            target.rect.width = inputWidth;\r\n            target.rect.left = target.rect.left + column.inputStyle.left;\r\n            target.rect.height = this.options.lineHeight - column.inputStyle.padding * 2;\r\n            target.rect.top = target.rect.top + column.inputStyle.padding;\r\n        }\r\n        if (column.hasTips == true && !options.type) {\r\n            options['type'] = 'tips';\r\n        }\r\n        if (target.row == 'header') {\r\n            if (delatX <= 8) {\r\n                options['borderPos'] = 'right';\r\n            }\r\n            if (delatX > 8 && target.rect.width - delatX <= 8) {\r\n                options['borderPos'] = 'left';\r\n            }\r\n        }\r\n        return options;\r\n    }\r\n    private showEdit(target, type?) {\r\n        if ((target && target.column && target.column.editType != 'input' && target.column.editType != 'select') && target.actionType.type != 'input') {\r\n            return;\r\n        }\r\n        var inputOptions = this.beforeInputShow ? this.beforeInputShow(target, type) : undefined;\r\n        if (!inputOptions || inputOptions.result == false) {\r\n            return;\r\n        }\r\n        if (inputOptions.type == 'select' && !type) {\r\n            this.showSelect(target);\r\n        } else {\r\n            this.showInput(target, inputOptions);\r\n        }\r\n    }\r\n\r\n    private showInput(target, inputOptions) {\r\n        if (this.inputState == 'inputing') {\r\n            return;\r\n        }\r\n        this.inputState = 'inputing';\r\n        this.Input.target = target;\r\n        this.Input.show(inputOptions);\r\n    }\r\n\r\n    private showSelect(target) {\r\n        target.rect.top += this.options.lineHeight;\r\n        this.Select.show(target);\r\n    }\r\n\r\n    private showToolTip(target) {\r\n        this.ToolTip.target = target;\r\n        this.ToolTip.beforeToolTipShow = this.beforeToolTipShow;\r\n        this.ToolTip.init(this.container);\r\n    }\r\n\r\n    private doAction(target) {\r\n        if (target.column.ID == 'tree' && target.actionType.operateType == 'expand') {\r\n            this.form.dataView.expandGridTree(target);\r\n            this.destoryScope();\r\n            this.form.update();\r\n        } else if (target.actionType.operateType == \"downArrow\") {\r\n            this.showEdit(target);\r\n        } else if (target.column.ID == 'tree' && target.actionType.operateType == 'expandToLevel') {\r\n            if (this.options.expandToLevel == false) {\r\n                return;\r\n            }\r\n            this.form.dataView.expandToLevel(target.actionType.expandToLevel);\r\n            this.destoryScope();\r\n        } else {\r\n            this.afterAction(target);\r\n        }\r\n    }\r\n\r\n    private handleHover(e) {\r\n        var target = this.getCurrentCell(e);\r\n        if (this.timeId) {\r\n            clearTimeout(this.timeId);\r\n            this.timeId = undefined;\r\n        }\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (!target.column.children && (target.actionType.borderPos == 'left' || target.actionType.borderPos == 'right')) {\r\n            if (target.actionType.borderPos == 'left') {\r\n                this.dragTarget = target.column;\r\n            } else {\r\n                if (target.column.isFrozen) {\r\n                    this.dragTarget = this.form.dataView.leafFrozenCols[target.column.index - 1];\r\n                } else {\r\n                    if (target.column.index - 1 >= 0) {\r\n                        var activeCol = false;\r\n                        for (var i = target.column.index - 1; i >= 0; i--) {\r\n                            if (this.form.dataView.leafActiveCols[i].isColumnHide == false) {\r\n                                activeCol = true;\r\n                                this.dragTarget = this.form.dataView.leafActiveCols[i];\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (!activeCol) {\r\n                            this.dragTarget = this.form.dataView.leafFrozenCols[this.form.dataView.leafFrozenCols.length - 1];\r\n                        }\r\n                    } else {\r\n                        this.dragTarget = this.form.dataView.leafFrozenCols[this.form.dataView.leafFrozenCols.length - 1];\r\n                    }\r\n                }\r\n            }\r\n            if (this.dragTarget.resizable == false || this.dragTarget.ID == 'tree') {\r\n                this.dragTarget = null;\r\n                return;\r\n            }\r\n            this.dragStart();\r\n            return;\r\n        } else {\r\n            if (this.options.hasHover == true && this.hoverTarget && this.hoverTarget.row.NO != target.row.NO) {\r\n                this.form.dataView.hoverTarget = target;\r\n                this.form.render.render();\r\n            }\r\n            if (this.options.hasHover == true && target.row.NO + '_' + target.column.ID + '_' + target.actionType.operateType != this.form.dataView.hoverIcon) {\r\n                this.form.dataView.hoverIcon = undefined;\r\n                this.form.render.render();\r\n            }\r\n            if (this.options.hasHover == true && target.actionType.isIcon == true) {\r\n                this.form.dataView.hoverIcon = target.row.NO + '_' + target.column.ID + '_' + target.actionType.operateType;\r\n                this.form.render.render();\r\n            }\r\n            this.hoverTarget = target;\r\n            this.timeId = setTimeout(function () {\r\n                if (this.hoverTarget.actionType) {\r\n                    this.hoverTarget.clientX = e.clientX;\r\n                    this.hoverTarget.clientY = e.clientY;\r\n                    this.showToolTip(this.hoverTarget);\r\n                }\r\n            }.bind(this), 500);\r\n        }\r\n    }\r\n\r\n    private destory() {\r\n        this.Input.hide();\r\n        this.Select.hide();\r\n        this.ToolTip.destory();\r\n    }\r\n\r\n    private showScope(target) {\r\n        if (window['active'] != this.container) {\r\n            this.destoryScope(this.options.name);\r\n        }\r\n        if (!target) {\r\n            return;\r\n        }\r\n        this.Scope.showScope(target, target, this.form.render.treeWidth);\r\n        if (target.row[target.column.ID] != undefined) {\r\n            this.selectText = target.row[target.column.ID];\r\n            var copyOption = this.beforeCopy ? this.beforeCopy(target) : undefined;\r\n            if (copyOption && copyOption.text != undefined) {\r\n                this.selectText = copyOption.text;\r\n            }\r\n        } else {\r\n            this.selectText = '';\r\n        }\r\n        this.selectedRange['rows'] = [target.row];\r\n        this.selectedRange['columns'] = [target.column];\r\n    }\r\n\r\n    private selectColumn(target) {\r\n        var rows = this.form.dataView.rows || [];\r\n        this.firstTarget = {};\r\n        this.lastTarget = {};\r\n        this.firstTarget['column'] = target.column;\r\n        this.lastTarget['column'] = target.column;\r\n        this.firstTarget['row'] = rows[0];\r\n        this.lastTarget['row'] = rows[rows.length - 1];\r\n        this.getSelectItems(this.firstTarget, this.lastTarget);\r\n        this.updateScope();\r\n        this.curTarget = null;\r\n        this.Scope.changeState('none');\r\n    }\r\n\r\n    private updateScope() {\r\n        if (!this.firstTarget || !this.lastTarget) {\r\n            return;\r\n        }\r\n        this.Scope.showScope(this.firstTarget, this.lastTarget, this.form.render.treeWidth);\r\n    }\r\n\r\n    private handleDrag(e) {\r\n        e.preventDefault();\r\n        if (this.state == 'scrollDrag') {\r\n            return;\r\n        }\r\n        if (this.state == 'resizeCol') {\r\n            this.updateResizePos(e);\r\n        } else {\r\n            this.selectByScope(e);\r\n        }\r\n    }\r\n\r\n    private selectByScope(e) {\r\n        if (window['active'] != this.container) {\r\n            return;\r\n        }\r\n        var target = this.getCurrentCell(e);\r\n        if (!target || target.column.ID == 'tree') {\r\n            return;\r\n        }\r\n        if (target.row == 'header' && this.selectState != 'columnSelect' && this.selectState != 'preSelect') {\r\n            if (e.shiftKey && (this.firstTarget || this.curTarget)) {\r\n                this.firstTarget['row'] = this.form.dataView.rows[0];\r\n                this.firstTarget['column'] = this.curTarget ? this.curTarget.column : this.firstTarget.column;\r\n                this.selectState = 'columnSelect';\r\n            } else {\r\n                this.selectColumn(target);\r\n                this.selectState = 'columnSelect';\r\n                return;\r\n            }\r\n        }\r\n        if (this.selectState == 'single' || this.selectState == 'none') {\r\n            this.firstTarget = target;\r\n            this.showScope(target);\r\n            this.selectState = 'preSelect';\r\n            return;\r\n        }\r\n        if (this.firstTarget && this.lastTarget && this.selectState == 'double') {\r\n            this.firstTarget = target;\r\n            this.showScope(target);\r\n            this.selectState = 'preSelect';\r\n            return;\r\n        }\r\n        if (!this.firstTarget) {\r\n            return;\r\n        }\r\n        this.dragTimeId = setTimeout(function () {\r\n            this.state = 'drag';\r\n            this.lastTarget = target;\r\n            if (this.selectState == 'columnSelect') {\r\n                this.lastTarget.row = this.form.dataView.rows[this.form.dataView.rows.length - 1];\r\n            } else if (target.row == 'header') {\r\n                this.lastTarget.row = this.form.dataView.rows[0];\r\n            }\r\n            this.updateScope();\r\n            this.Scope.changeState('none');\r\n        }.bind(this), 0);\r\n    }\r\n    private getSelectItems(first, last) {\r\n        var row = [], selectedColumns = [], text = \"\", result = \"\", rowNo, numbers;\r\n        var leftTarget = first, rightTarget = last, columns, startIndex, endIndex, copyOption;\r\n        this.selectedRange['columns'] = [];\r\n        if (first.column.x > last.column.x) {\r\n            leftTarget = last;\r\n            rightTarget = first;\r\n        }\r\n        startIndex = leftTarget.column.index;\r\n        endIndex = rightTarget.column.index + 1;\r\n        numbers = Math.abs(first.row.showNo - last.row.showNo) + 1;\r\n        rowNo = first.row.showNo - last.row.showNo > 0 ? last.row.showNo : first.row.showNo;\r\n        row = this.form.dataView.rows.slice(rowNo - 1, rowNo - 1 + numbers);\r\n        if (rightTarget.column.isFrozen) {\r\n            columns = this.form.dataView.leafFrozenCols;\r\n        } else if (!leftTarget.column.isFrozen) {\r\n            columns = this.form.dataView.leafActiveCols;\r\n        } else {\r\n            endIndex = this.form.dataView.leafFrozenCols.length;\r\n            selectedColumns = this.form.dataView.leafFrozenCols.slice(startIndex, endIndex);\r\n            startIndex = 0;\r\n            endIndex = rightTarget.column.index + 1;\r\n            columns = this.form.dataView.leafActiveCols;\r\n        }\r\n        selectedColumns = selectedColumns.concat(columns.slice(startIndex, endIndex));\r\n        for (var m = 0; m < row.length; m++) {\r\n            for (var n = 0; n < selectedColumns.length; n++) {\r\n                if (selectedColumns[n].isColumnHide) {\r\n                    continue;\r\n                }\r\n                if (m == 0) {\r\n                    this.selectedRange.columns.push(selectedColumns[n]);\r\n                }\r\n                text = (row[m][selectedColumns[n].ID] != undefined ? row[m][selectedColumns[n].ID] : \"\");\r\n                copyOption = this.beforeCopy ? this.beforeCopy({ row: row[m], column: selectedColumns[n] }) : undefined;\r\n                if (copyOption && copyOption.text != undefined) {\r\n                    text = copyOption.text;\r\n                }\r\n                if (n < selectedColumns.length - 1) {\r\n                    text += '\\t';\r\n                }\r\n                result += text;\r\n            }\r\n            result = result + '\\n';\r\n        }\r\n        this.selectText = result;\r\n        this.selectedRange['rows'] = row;\r\n    }\r\n\r\n    private handleKeyDown(e) {\r\n        // \r\n        if (e.keyCode >= 37 && e.keyCode <= 40 || e.keyCode == 13 || e.keyCode == 9) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            this.inputState = '';\r\n            this.setSelectedCell(e);\r\n            this.Scope.changeState('none');\r\n        }\r\n        if (e.keyCode == 27) {\r\n            if (this.inputState == 'inputing') {\r\n                this.inputState = '';\r\n                return;\r\n            }\r\n            this.Scope.changeState('none');\r\n        }\r\n        if (e.keyCode == 67 && e.ctrlKey == true) {\r\n            this.copy(e);\r\n        }\r\n        if (e.keyCode == 86 && e.ctrlKey == true) {\r\n            this.copyArea.select();\r\n            setTimeout(this.paste.bind(this), 0);\r\n        }\r\n        if (e.ctrlKey != true && (e.keyCode >= 65 && e.keyCode <= 90 || e.keyCode >= 96 && e.keyCode <= 105 || e.keyCode >= 48 && e.keyCode <= 57)) {\r\n            if (!this.curTarget) {\r\n                return;\r\n            }\r\n            this.showEdit(this.curTarget, 'keydown');\r\n        }\r\n        // if (e.ctrlKey == true && e.keyCode == '89') {\r\n        //     e.stopPropagation();\r\n        //     this.redo();\r\n        // }\r\n        // if (e.ctrlKey == true && e.keyCode == '90') {\r\n        //     e.stopPropagation();\r\n        //     this.undo();\r\n        // }\r\n    }\r\n\r\n    // private undo() {\r\n    //     var operate: any = this.History.undo();\r\n    //     if (operate) {\r\n    //         this.doHistory(operate, 'undo');\r\n    //     }\r\n    // }\r\n\r\n    // private redo() {\r\n    //     var operate = this.History.redo();\r\n    //     if (operate) {\r\n    //         this.doHistory(operate, 'redo');\r\n    //     }\r\n    // }\r\n\r\n    private doHistory(operate, type) {\r\n        switch (operate.operateType) {\r\n            case 'input':\r\n                this.afterInput(operate.target, operate, type);\r\n                break;\r\n            case 'select':\r\n                this.comboBoxChange(operate.to, operate, type);\r\n                break;\r\n            case 'paste':\r\n                this.paste(operate.target, operate, type);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private dragStart() {\r\n        this.state = 'resizeCol';\r\n        document.getElementById('eventOf' + this.options.name).style.cursor = 'col-resize';\r\n    }\r\n\r\n    private dragCancel() {\r\n        this.state = '';\r\n        document.getElementById('eventOf' + this.options.name).style.cursor = 'default';\r\n        this.dragTarget = null;\r\n        this.dragCell = null;\r\n    }\r\n\r\n    private dragEnd(mousePos) {\r\n        if (!this.dragTarget) {\r\n            return;\r\n        }\r\n        var width = mousePos - document.getElementById(this.container).getBoundingClientRect().left - this.calcLeftPos();\r\n        var minWidth = this.dragTarget.minWidth ? this.dragTarget.minWidth : 30;\r\n        var maxWidth = this.dragTarget.maxWidth ? this.dragTarget.maxWidth : this.rect.viewWidth * 0.9;\r\n        if (this.dragTarget.isFrozen) {\r\n            var activeMaxColWidth = this.getActiveMaxColWidth();\r\n            var lastWidth = this.getFrozenWidth(this.dragTarget, activeMaxColWidth);\r\n            maxWidth = lastWidth >= maxWidth ? maxWidth : lastWidth;\r\n        }\r\n        this.state = '';\r\n        if (width <= minWidth) {\r\n            width = minWidth;\r\n        }\r\n        if (width >= maxWidth) {\r\n            width = maxWidth;\r\n        }\r\n        document.getElementById('eventOf' + this.options.name).style.cursor = 'default';\r\n        this.destory();\r\n        this.destoryScope();\r\n        if (this.dragCell) {\r\n            this.dragCell.parentNode.removeChild(this.dragCell);\r\n        }\r\n        this.dragCell = null;\r\n        this.firstTarget = null;\r\n        if (width == this.dragTarget.width) {\r\n            return;\r\n        }\r\n        this.form.dataView.updateWidthByID(this.dragTarget.ID, width);\r\n        this.form.updateFrame();\r\n        this.form.update();\r\n        this.dragTarget.width = width;\r\n        if (this.afterResizeColumn) {\r\n            this.afterResizeColumn(this.dragTarget);\r\n        }\r\n        this.dragTarget = null;\r\n    }\r\n\r\n    private getFrozenWidth(column, maxWidth) {\r\n        var columns = this.form.dataView.frozenColumns,\r\n            lastWidth = this.rect.viewWidth - maxWidth; //\r\n        for (var i = 0; i < columns.length; i++) {\r\n            if (columns[i].ID != column.ID) {\r\n                lastWidth -= columns[i].width;\r\n            }\r\n        }\r\n        return lastWidth - 2;\r\n    }\r\n\r\n    private getActiveMaxColWidth() {\r\n        var maxWidth,\r\n            columns = this.form.dataView.activeColumns;\r\n        for (var i = 0, len = columns.length; i < len; i++) {\r\n            if (!columns[i].isColumnHide && !maxWidth) {\r\n                maxWidth = columns[i].width;\r\n            }\r\n            if (maxWidth && columns[i].width > maxWidth) {\r\n                maxWidth = columns[i].width;\r\n            }\r\n        }\r\n        return maxWidth;\r\n    }\r\n\r\n    private updateResizePos(e) {\r\n        if (!this.dragTarget) {\r\n            return;\r\n        }\r\n        if (this.dragCell) {\r\n            this.dragCell.style.right = this.rect.viewWidth - (e.clientX - e.currentTarget.getBoundingClientRect().left) - 5 + 'px';\r\n        } else {\r\n            var dragCell = document.createElement('div');\r\n            dragCell.setAttribute('id', 'dragCellOf' + this.options.name);\r\n            dragCell.style.position = 'absolute';\r\n            dragCell.style.border = '1px dashed #aaa';\r\n            dragCell.style.top = '-1px';\r\n            dragCell.style.bottom = '-1px';\r\n            dragCell.style.left = this.calcLeftPos() + 'px';\r\n            dragCell.style.right = this.rect.viewWidth - (e.clientX - e.currentTarget.getBoundingClientRect().left) - 5 + 'px';\r\n            document.getElementById(this.container).appendChild(dragCell);\r\n            this.dragCell = dragCell;\r\n        }\r\n    }\r\n    private calcLeftPos() {\r\n        var left = this.dragTarget.x - this.rect.scrollLeft;\r\n        if (this.dragTarget.isFrozen) {\r\n            left = this.dragTarget.x;\r\n        } else {\r\n            left = left < this.rect.frozenWidth ? this.rect.frozenWidth : left;\r\n        }\r\n        return left;\r\n    }\r\n\r\n    private handleScroll(target) {\r\n        var top = (target.row.showNo) * this.rect.lineHeight + this.rect.headerHeight - this.rect.scrollTop;\r\n        var scrollLeft = undefined, scrollTop = undefined;\r\n        if (target.column.x - this.rect.scrollLeft < this.rect.frozenWidth) {\r\n            scrollLeft = this.rect.scrollLeft - this.rect.frozenWidth + target.column.x - this.rect.scrollLeft;\r\n        }\r\n        if (target.column.x + target.column.width - this.rect.scrollLeft > this.rect.viewWidth) {\r\n            scrollLeft = target.column.x + target.column.width - this.rect.viewWidth;\r\n        }\r\n        if (top + this.options.lineHeight > this.rect.viewHeight) {\r\n            scrollTop = this.rect.scrollTop + this.options.lineHeight + top - this.rect.viewHeight;\r\n        } else if (top <= this.rect.headerHeight) {\r\n            scrollTop = this.rect.scrollTop + top - this.rect.headerHeight - this.rect.lineHeight;\r\n        }\r\n        if (scrollLeft == undefined && scrollTop == undefined) {\r\n            return target;\r\n        }\r\n        this.setScrollPos(scrollLeft, scrollTop);\r\n        if (scrollLeft) {\r\n            target.rect.left = target.column.x - scrollLeft + 1;\r\n            return target;\r\n        }\r\n    }\r\n\r\n    private setSelectedCell(e) {\r\n\r\n        // 13Enter9Tab37383940\r\n        // Enter40Shift + Enter 38\r\n        // Tab39Shift + Tab 37\r\n        // Shift + \r\n        // Ctrl + \r\n\r\n        var rows = this.form.dataView.rows, columns, key = e.keyCode, tempTarget = this.curTarget ? this.curTarget : this.firstTarget;\r\n        columns = this.form.dataView.renderFrozenCols;\r\n        if (!tempTarget) {\r\n            return;\r\n        }\r\n        for (var i = 0, len = this.form.dataView.leafActiveCols.length; i < len; i++) {\r\n            if (!this.form.dataView.leafActiveCols[i].isColumnHide) {\r\n                columns = columns.concat([this.form.dataView.leafActiveCols[i]]);\r\n            }\r\n        }\r\n        for (var j = 0; j < columns.length; j++) {\r\n            if (columns[j].ID == 'tree') {\r\n                columns.splice(j, 1);\r\n            }\r\n            columns[j].colIndex = j;\r\n        }\r\n\r\n        if (e.ctrlKey && 37 <= key && key <= 40) {\r\n            switch (key) {\r\n                case 37: {\r\n                    tempTarget.column = columns[0];\r\n                    break;\r\n                }\r\n                case 38: {\r\n                    tempTarget.row = rows[0];\r\n                    break;\r\n                }\r\n                case 39: {\r\n                    tempTarget.column = columns[columns.length - 1];\r\n                    break;\r\n                }\r\n                case 40: {\r\n                    tempTarget.row = rows[rows.length - 1];\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n            this.curTarget = tempTarget;\r\n            this.firstTarget = null;\r\n            this.lastTarget = null;\r\n            this.showScope(this.curTarget);\r\n            this.setSelectedRow(this.curTarget.row.id, this.curTarget.row.showNo);\r\n        } else {\r\n            if (e.shiftKey && key != 9 && key != 13) {\r\n                if (this.lastTarget) {\r\n                    tempTarget = this.lastTarget;\r\n                } else {\r\n                    tempTarget = this.curTarget;\r\n                    this.firstTarget = JSON.parse(JSON.stringify(this.curTarget));\r\n                    this.curTarget = null;\r\n                }\r\n            } else {\r\n                tempTarget = this.curTarget ? this.curTarget : this.firstTarget;\r\n            }\r\n            if ((key == 38 || (e.shiftKey && key == 13)) && tempTarget.row.showNo > 1) {\r\n                tempTarget.row = rows[tempTarget.row.showNo - 2];\r\n            }\r\n            if ((key == 40 || (!e.shiftKey && key == 13)) && tempTarget.row.showNo < rows.length) {\r\n                if (key == 13 && this.inputState == 'inputing') {\r\n                    this.inputState = '';\r\n                }\r\n                tempTarget.row = rows[tempTarget.row.showNo];\r\n            }\r\n            if (key == 37 && tempTarget.column.colIndex > 0) {\r\n                tempTarget.column = columns[tempTarget.column.colIndex - 1];\r\n            }\r\n            if (key == 39 && tempTarget.column.colIndex < columns.length - 1) {\r\n                tempTarget.column = columns[tempTarget.column.colIndex + 1];\r\n            }\r\n            if (e.keyCode == 9 && !e.shiftKey) {\r\n                if (tempTarget.column.colIndex < columns.length - 1) {\r\n                    tempTarget.column = columns[tempTarget.column.colIndex + 1];\r\n                } else if (tempTarget.row.showNo < rows.length) {\r\n                    tempTarget.column = columns[0];\r\n                    tempTarget.row = rows[tempTarget.row.showNo];\r\n                } else if (tempTarget.column.colIndex == columns.length - 1 && tempTarget.row.showNo == rows.length) {\r\n                    tempTarget.column = columns[0];\r\n                    tempTarget.row = rows[0];\r\n                }\r\n            }\r\n            if (e.keyCode == 9 && e.shiftKey) {\r\n                if (tempTarget.column.colIndex > 0) {\r\n                    tempTarget.column = columns[tempTarget.column.colIndex - 1];\r\n                } else if (tempTarget.row.showNo > 1) {\r\n                    tempTarget.column = columns[columns.length - 1];\r\n                    tempTarget.row = rows[tempTarget.row.showNo - 2];\r\n                } else if (tempTarget.column.colIndex == 0 && tempTarget.row.showNo == 1) {\r\n                    tempTarget.column = columns[columns.length - 1];\r\n                    tempTarget.row = rows[rows.length - 1];\r\n                }\r\n            }\r\n            if (e.shiftKey && key != 9 && key != 13) {\r\n                this.lastTarget = tempTarget;\r\n                this.getSelectItems(this.firstTarget, this.lastTarget);\r\n                this.setSelectedRow(this.firstTarget.row.id, this.lastTarget.row.showNo);\r\n                this.updateScope();\r\n            } else {\r\n                this.curTarget = tempTarget;\r\n                if (this.firstTarget) {\r\n                    this.firstTarget = null;\r\n                    this.lastTarget = null;\r\n                }\r\n                this.setSelectedRow(this.curTarget.row.id, this.curTarget.row.showNo);\r\n                this.showScope(this.curTarget);\r\n            }\r\n        }\r\n        this.handleScroll(tempTarget);\r\n        tempTarget = null;\r\n    }\r\n\r\n    private setSelectedRow(index, no?) {\r\n        this.form.dataView.selectedRow = index;\r\n        this.form.dataView.selectedRowByRender = no;\r\n        this.form.render.render();\r\n    }\r\n\r\n    private getSelections() {\r\n        return this.selectedRange;\r\n    }\r\n}\r\nexport { CanvasEvent };","class FileSaver {\r\n\r\n    public dataView: any;\r\n    public beforeRenderCell: any;\r\n    private options: any;\r\n    private table: string = '';\r\n\r\n    constructor(options) {\r\n        this.options = options;\r\n    }\r\n\r\n    public exportToExcel(fileName, sheetName) {\r\n        var blob, excel;\r\n        this.table = '';\r\n        this.renderTable();\r\n        excel = this.initExcel(sheetName);\r\n        blob = new Blob([excel], { type: 'vnd.ms-excel' });\r\n        this.downLoad(blob, fileName + '.xls');\r\n    }\r\n\r\n    private initExcel(sheetName) {\r\n        var excelFile = '<html xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns=\"http://www.w3.org/TR/REC-html40\">';\r\n        excelFile += '<meta http-equiv=\"content-type\" content=\"application/vnd.ms-excel\"; charset=\"UTF-8\">';\r\n        excelFile += '<head>';\r\n        excelFile += '<!--[if gte mso 9]>';\r\n        excelFile += '<xml>';\r\n        excelFile += '<x:ExcelWorkbook>';\r\n        excelFile += '<x:ExcelWorksheets>';\r\n        excelFile += '<x:ExcelWorksheet>';\r\n        excelFile += '<x:Name>';\r\n        excelFile += sheetName || 'New Sheet';\r\n        excelFile += '</x:Name>';\r\n        excelFile += '<x:WorksheetOptions>';\r\n        excelFile += '<x:DisplayGridlines/>';\r\n        excelFile += '<x:SummaryBelow/>';\r\n        excelFile += '<x:sheetPr><x:outlinePr><x:summaryBelow=\"0\"/></x:outlinePr</x:sheetPr>';\r\n        excelFile += '</x:WorksheetOptions>';\r\n        excelFile += '</x:ExcelWorksheet>';\r\n        excelFile += '</x:ExcelWorksheets>';\r\n        excelFile += '</x:ExcelWorkbook>';\r\n        excelFile += '</xml>';\r\n        excelFile += '<![endif]-->';\r\n        excelFile += '</head>';\r\n        excelFile += '<body>';\r\n        excelFile += this.table;\r\n        excelFile += '</body>';\r\n        excelFile += '</html>';\r\n        return excelFile;\r\n    }\r\n\r\n    private renderTable() {\r\n        this.table += '<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"border-collapse: collapse;\">';\r\n        var rows = ['header'].concat(this.dataView.allRows);\r\n        for (var i = 0, len = rows.length; i < len; i++) {\r\n            this.renderRow(rows[i]);\r\n        }\r\n        this.table += '</table>';\r\n    }\r\n\r\n    private renderRow(row) {\r\n        var columns = this.dataView.leafFrozenCols.concat(this.dataView.leafActiveCols);\r\n        this.table += '<tr height=30';\r\n        if (row != 'header' && row.level >= 0) {\r\n            this.table += ' style=\"mso-outline-level:' + row.level + '\"';\r\n        }\r\n        this.table += '>';\r\n        for (var i = 0, len = columns.length; i < len; i++) {\r\n            if (columns[i].ID == 'tree') {\r\n                continue;\r\n            }\r\n            this.renderCell(row, columns[i]);\r\n        }\r\n        this.table += '</tr>';\r\n    }\r\n\r\n    private renderCell(row, column) {\r\n        var options = this.beforeRenderCell ? this.beforeRenderCell({ row: row, column: column }) : {};\r\n        //\r\n        if (options.ignoreColumn == true) {\r\n            return;\r\n        }\r\n        var text = row != 'header' ? row[column.ID] : column.name;\r\n        var style = 'white-space:nowrap;vertical-align:middle;';\r\n        this.table += '<td';\r\n        if (row == 'header') {\r\n            if (column.isColumnHide == true) {\r\n                this.table += ' width=' + 0;\r\n            } else {\r\n                style += 'width:' + column.width + 'px; ';\r\n            }\r\n            style += 'text-align:center;';\r\n        } else {\r\n            style += 'text-align:left;';\r\n            style += 'mso-char-indent-count:1;padding-left:' + column.textIndent + 'px;';\r\n        }\r\n        if (options.background) {\r\n            style += 'background:' + options.background + ';';\r\n        }\r\n        if (options.font) {\r\n            style += 'font:' + options.font + ';';\r\n        }\r\n        if (options.color) {\r\n            style += 'color:' + options.color + ';';\r\n        }\r\n        if (options.borderTop) {\r\n            style += 'border-top:' + options.borderTop + ';';\r\n        }\r\n        if (options.borderRight) {\r\n            style += 'border-right:' + options.borderRight + ';';\r\n        }\r\n        if (options.borderBottom) {\r\n            style += 'border-bottom:' + options.borderBottom + ';';\r\n        }\r\n        if (options.borderLeft) {\r\n            style += 'border-left:' + options.borderLeft + ';';\r\n        }\r\n        if (options.textType == 'text') {\r\n            style += \"mso-number-format:'\\@';\";\r\n        }\r\n        this.table += ' style=\"' + style + '\">';\r\n        if (row != 'header' && options.text != undefined) {\r\n            text = options.text;\r\n        }\r\n        this.table += this.escapeHTHL(text);\r\n        this.table += '</td>';\r\n    }\r\n    private escapeHTHL(str) {\r\n        var entityMap = {\r\n            \"&\": \"&amp;\",\r\n            \"<\": \"&lt;\",\r\n            \">\": \"&gt;\",\r\n            '\"': '&quot;',\r\n            \"'\": '&#39;',\r\n            \"/\": '&#x2F;',\r\n            \" \": '&nbsp;'\r\n        };\r\n\r\n        function escapeHtml(str) {\r\n            return String(str).replace(/[&<>\"'\\/ ]/g, function (s) {\r\n                return entityMap[s];\r\n            });\r\n        }\r\n\r\n        return escapeHtml(str);\r\n    }\r\n\r\n    private downLoad(blob, fileName) {\r\n        if (window.navigator.msSaveOrOpenBlob) {\r\n            navigator.msSaveBlob(blob, fileName);\r\n        } else {\r\n            var link = document.createElement('a');\r\n            link.href = window.URL.createObjectURL(blob);\r\n            link.download = fileName;\r\n            link.click();\r\n            window.URL.revokeObjectURL(link.href);\r\n        }\r\n    }\r\n}\r\n\r\nexport { FileSaver };"],"sourceRoot":""}